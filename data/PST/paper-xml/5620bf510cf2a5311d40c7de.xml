<?xml version="1.0" encoding="UTF-8"?>
<TEI xml:space="preserve" xmlns="http://www.tei-c.org/ns/1.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.tei-c.org/ns/1.0 https://raw.githubusercontent.com/kermitt2/grobid/master/grobid-home/schemas/xsd/Grobid.xsd"
 xmlns:xlink="http://www.w3.org/1999/xlink">
	<teiHeader xml:lang="en">
		<fileDesc>
			<titleStmt>
				<title level="a" type="main">A Reliability-Augmented Particle Filter for Magnetic Fingerprinting based Indoor Localization on Smartphone</title>
			</titleStmt>
			<publicationStmt>
				<publisher/>
				<availability status="unknown"><licence/></availability>
			</publicationStmt>
			<sourceDesc>
				<biblStruct>
					<analytic>
						<title level="a" type="main">A Reliability-Augmented Particle Filter for Magnetic Fingerprinting based Indoor Localization on Smartphone</title>
					</analytic>
					<monogr>
						<imprint>
							<date/>
						</imprint>
					</monogr>
					<idno type="MD5">DF1860DF031A8A8F93657AD7FA124BEA</idno>
					<idno type="DOI">10.1109/TMC.2015.2480064</idno>
					<note type="submission">This article has been accepted for publication in a future issue of this journal, but has not been fully edited. Content may change prior to final publication. Citation information: DOI 10.1109/TMC.2015.2480064, IEEE Transactions on Mobile Computing This article has been accepted for publication in a future issue of this journal, but has not been fully edited. Content may change prior to final publication. Citation information: DOI 10.1109/TMC.2015.2480064, IEEE Transactions on Mobile Computing</note>
				</biblStruct>
			</sourceDesc>
		</fileDesc>
		<encodingDesc>
			<appInfo>
				<application version="0.7.3" ident="GROBID" when="2023-07-28T03:40+0000">
					<desc>GROBID - A machine learning software for extracting information from scholarly documents</desc>
					<ref target="https://github.com/kermitt2/grobid"/>
				</application>
			</appInfo>
		</encodingDesc>
		<profileDesc>
			<textClass>
				<keywords>
					<term>Indoor Localization</term>
					<term>Magnetic</term>
					<term>Particle Filter</term>
					<term>Smartphone</term>
				</keywords>
			</textClass>
			<abstract>
<div xmlns="http://www.tei-c.org/ns/1.0"><p>Using magnetic field data as fingerprints for smartphone indoor positioning has become popular in recent years. Particle filter is often used to improve accuracy. However, most of existing particle filter based approaches either are heavily affected by motion estimation errors, which result in unreliable systems, or impose strong restrictions on smartphone such as fixed phone orientation, which are not practical for real-life use. In this paper, we present a novel indoor positioning system for smartphones, which is built on our proposed reliability-augmented particle filter. We create several innovations on the motion model, the measurement model, and the resampling model to enhance the basic particle filter. To minimize errors in motion estimation and improve the robustness of the basic particle filter, we propose a dynamic step length estimation algorithm and a heuristic particle resampling algorithm. We use a hybrid measurement model, combining a new magnetic fingerprinting model and the existing magnitude fingerprinting model, to improve system performance, and importantly avoid calibrating magnetometers for different smartphones. In addition, we propose an adaptive sampling algorithm to reduce computation overhead, which in turn improves overall usability tremendously. Finally, we also analyze the "Kidnapped Robot Problem" and present a practical solution. We conduct comprehensive experimental studies, and the results show that our system achieves an accuracy of 1∼2m on average in a large building.</p></div>
			</abstract>
		</profileDesc>
	</teiHeader>
	<text xml:lang="en">
		<body>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="1">INTRODUCTION</head><p>I NDOOR positioning using smartphones has attracted tremen- dous interests in recent years due to an increasing number of location-based applications that require accurate positioning or continuous tracking in buildings. The Wi-Fi fingerprinting based approach has become popular due to its simplicity and leveraging on the widely available Wi-Fi infrastructure. This approach does not require any specialized hardware or additional infrastructure support. However, tracking the location of a mobile user requires frequent Wi-Fi scanning which is known to be power-hungry for smartphones. In addition, the accuracy of Wi-Fi fingerprinting depends on a number of key factors including the number of Wi-Fi access points deployed, spatial differentiability, and temporal stability of the radio environment <ref type="bibr" target="#b0">[1]</ref>.</p><p>With the availability of more embedded sensors on smartphones, a new fingerprinting approach based on magnetometer has been proposed <ref type="bibr" target="#b1">[2]</ref>, <ref type="bibr" target="#b2">[3]</ref>, <ref type="bibr" target="#b3">[4]</ref>. This approach is based on the hypothesis that the magnetic field in an indoor setting is nonuniform, and their fluctuations arise from both natural and manmade sources such as steel and concrete structures and electric systems. The abnormalities of magnetic field can be used as fingerprints for indoor localization. While this approach shares the same principle as Wi-Fi fingerprinting, it has several advantages <ref type="bibr" target="#b3">[4]</ref>, <ref type="bibr" target="#b4">[5]</ref>, <ref type="bibr" target="#b5">[6]</ref>, <ref type="bibr" target="#b6">[7]</ref>: 1) independent from Wi-Fi infrastructure; 2) more reliable than Wi-Fi; 3) the change of magnetic field with location is quite significant, allowing for precise positioning; 4) more power efficient.</p><p>Different from Wi-Fi fingerprints that combine the radio signal strength from multiple access points, a magnetic fingerprint is basically a 3-axis vector, consisting of the magnetic field readings along a smartphone's three axes (X, Y and Z). Studies <ref type="bibr" target="#b4">[5]</ref>, <ref type="bibr" target="#b5">[6]</ref>, <ref type="bibr" target="#b7">[8]</ref> show that in a large indoor space the magnetic fingerprints may not be unique. As a result, large localization error may occur. Most of the existing work <ref type="bibr" target="#b1">[2]</ref>, <ref type="bibr" target="#b2">[3]</ref>, <ref type="bibr" target="#b8">[9]</ref> leverage on Particle Filter (i.e., Monte Carlo Localization or MCL) to solve this problem and improve accuracy. The basic principle is to use random samples, also referred to as particles, i.e., hypothesis for the user's state such as position and heading direction, to represent the posterior distribution of a user's state. Particle filter recursively re-samples a set of particles according to a series of magnetic fingerprints and their spatial correlations to converge to the true state. The spatial correlations can be obtained by estimating user motion. Therefore, the performance of particle filter depends on: 1) motion estimation; 2) fingerprint measurement and the magnetic fingerprinting model; and 3) resampling.</p><p>We discover several limitations among existing particle filter based approaches. First, magnetometer readings are associated with phone orientation. When a phone changes its orientation, we get different vectors. One may collect and store the magnetic readings of all directions at any location <ref type="bibr" target="#b5">[6]</ref>, <ref type="bibr" target="#b8">[9]</ref>, which obviously incurs high training cost, or use coordinate transformation <ref type="bibr" target="#b2">[3]</ref>, which can be error-prone in reality. But both measurement models used in existing particle filter based solutions <ref type="bibr" target="#b1">[2]</ref>, <ref type="bibr" target="#b2">[3]</ref>, <ref type="bibr" target="#b8">[9]</ref> typically require a smartphone to head the same way as the user. This is not practical as we cannot expect smartphone users keep their smart-phone direction the same all the time when moving and navigating in buildings. Moreover, different smartphones may have different types of magnetometers that require carefully sensor calibration before use. Magnetometer calibration is difficult considering a large number of smartphone users. Therefore, both better measurement and magnetic fingerprinting models are needed.</p><p>Second, existing motion estimation methods are error-prone. Particle filter is mostly used for tracking mobile robots <ref type="bibr" target="#b9">[10]</ref>, <ref type="bibr" target="#b10">[11]</ref>. When applied to smartphone tracking, motion estimation usually incurs much more noise than robots, such as step miscounting, step length estimation error, or change of heading offset (i.e., the difference between user heading and phone heading). These errors may easily lead to localization failure.</p><p>Third, the computation overhead of particle filter is proportional to the number of particles we use, and it is believed that it should be larger than Wi-Fi fingerprinting. When we have a large number of smartphone users, we may see considerable computation demands on server. How to reduce computation cost is not a trivial task while keeping system accuracy.</p><p>Finally, the existing particle filter methods suffer from the well known "Kidnapped Robot Problem" <ref type="bibr" target="#b11">[12]</ref>, in which all particles may lost tracking of the target and hence recovery is not possible. In highly noisy and complex environments, these systems may easily run into such problem.</p><p>In this paper, we present a systematic approach to indoor positioning based on magnetic field fingerprinting, named MaLoc (Magnetic fingerprinting based indoor Localization). We propose a reliability-augmented particle filter, aiming to address the aforementioned issues and design a practical and accuracy indoor positioning system.</p><p>Firstly, we propose a hybrid measurement model to improve localization accuracy by combining the HV magnetic fingerprinting model with the magnetic density fingerprinting model. The HV model is obtained by extracting both the horizontal and vertical components of magnetic vector, which has the key features of being independent from phone orientation. We also explore the gradient of magnetic fingerprint to avoid calibrating different smartphone magnetometers. Secondly, we propose a novel motion estimation method covering step counting, step length estimation and user heading change estimation. This method is also independent from phone orientation. To minimize estimation errors and improve system robustness, we propose a dynamic step length estimation algorithm and a heuristic resampling algorithm. Specially, the heuristic resampling algorithm allows regular use of smartphone during localization such as answering a call or sending a message, whereas in basic particle filter it may arise heading offset change and introduce large errors into heading change estimation, and hence result in localization failure. Thirdly, to reduce computation overhead, we present an adaptive sampling algorithm, named Bundle Iterative Sampling, which is able to reduce sample size greatly while maintaining high localization accuracy and precision. Finally, we analyze different scenarios that may easily lead to localization failure and propose a practical solution.</p><p>In addition, we develop an efficient crowdsourcing tool to collect magnetic fingerprints, aiming to improve the existing timeconsuming and labor-intensive training process <ref type="bibr" target="#b6">[7]</ref>.</p><p>MaLoc has many practical implications for real deployment such as no restriction on smartphone's orientation, being able to operate without intervening regular phone applications, and being scalable to a large number of users. In summary, this paper makes the following contributions.</p><p>(1) We propose a reliability-augmented particle filter to improve system performance and robustness, which includes a dynamic step length estimation method to compensate the uncertainty of user's true step length, a heuristic particle resampling mechanism to solve the heading offset change problem. <ref type="bibr" target="#b1">(2)</ref> We propose a novel hybrid measurement model to improve localization performance, which has the advantage of being independent from phone orientation. Moreover, it avoids calibrating different smartphone magnetometers. <ref type="bibr" target="#b2">(3)</ref> We propose an adaptive sampling algorithm to reduce computation overhead, making the system be more scalable to a large number of users. (4) MaLoc is a systematic solution, which takes many practical problems (i.e., restrictions on smartphone's orientation and kidnapped robot problem) into consideration. Moreover, we conduct comprehensive field studies in a large building. The results show that MaLoc achieves an accuracy of 1∼2 meters for various indoor settings and it is more power-efficient than Wi-Fi fingerprinting.</p><p>The paper is organized as follows. Section 2 describes the related work. Section 3 reviews the background and our empirical studies of magnetometer and indoor magnetic field. Section 4 presents the architecture of MaLoc. The motion model and the magnetic measurement model are introduced in Sections 5 and 6, respectively. Section 7 shows our bundle iterative sampling algorithm. Section 8 presents the analysis and solution for kidnapped robot problem. Section 9 describes the method for building the fingerprint database. Section 10 describes the experiments, and finally Section 11 concludes the paper.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2">RELATED WORK</head><p>Much work has been done in indoor localization over the past decade. Many systems are built upon special infrastructures such as infrared <ref type="bibr" target="#b12">[13]</ref>, acoustic <ref type="bibr" target="#b13">[14]</ref> and bluetooth <ref type="bibr" target="#b14">[15]</ref>. It is usually very costly deploying these infrastructures. Other systems leverage on existing, widely available infrastructures, such as GSM, Wi-Fi, and FM. Earlier Wi-Fi based approaches use a propagation model of receiving signal strength (RSS) from Wi-Fi access points (APs) to compute the receiver's location <ref type="bibr" target="#b15">[16]</ref>. However, building such a model often requires the prior knowledge of AP positions and the accuracy much depends on the multi-path fading effect. Existing work such as <ref type="bibr" target="#b16">[17]</ref> do not need to war-drive the entire space, but they require all the AP positions to be known. EZ <ref type="bibr" target="#b17">[18]</ref> does not require any explicit pre-deployment effort of Wi-Fi APs, but it comes at the cost of loss of accuracy, in which the median localization error may be up to 7m in a large building environment. The Wi-Fi fingerprinting based approach is becoming popular in recent years as it does not require any prior knowledge about APs, as well as it does not leverage on the propagation model. Using Wi-Fi fingerprinting, RADAR <ref type="bibr" target="#b18">[19]</ref> and Horus <ref type="bibr" target="#b19">[20]</ref> achieve 3-5m and 2m localization accuracy, respectively. However, the Wi-Fi RSS is sensitive to human presence, and it may vary from time to time, limiting localization accuracy. PinLoc <ref type="bibr" target="#b0">[1]</ref> improves the accuracy within 1m by leveraging the physical layer but extensive profiling is required. FM fingerprinting is also feasible for indoor localization. Chen et al. <ref type="bibr" target="#b20">[21]</ref> used FM signals, which is more energy efficient than Wi-Fi fingerprinting, but localization can only be done in room level. GSM based indoor localization   methods <ref type="bibr" target="#b21">[22]</ref> have also been proposed to work with a coarse precision.</p><p>Recent years, magnetic field has been explored as fingerprints for robot localization <ref type="bibr" target="#b22">[23]</ref>. Haverinen et al. <ref type="bibr" target="#b1">[2]</ref> proposed an indoor localization system using particle filter for both pedestrian and robot in the corridor of a building. Their system requires the user's heading must keep consistent with the corridor while walking. Chung et al. <ref type="bibr" target="#b5">[6]</ref> proposed a system which requires measuring the magnetic readings of all directions at any position and localization is done with an array of magnetometers. Their system achieves an accuracy of 4.7 meters. However, the training cost is quite high. Some work has been proposed using magnetometer on smartphones. LocateMe <ref type="bibr" target="#b3">[4]</ref> investigated a magnetic model using smartphones, and localization can be achieved in room level. However, it is restricted in a 1-D environment, such as corridor. Bilke <ref type="bibr" target="#b8">[9]</ref> proposed a localization system which works in an 2-D environment with the mean localization error of 4 meters; but its training cost is comparable to the work done in <ref type="bibr" target="#b5">[6]</ref>. The system proposed in <ref type="bibr" target="#b2">[3]</ref> also works in 2-D environment and is able to avoid the measurements for all directions by coordinate transformation. However, it is error-prone because orientation estimation contains errors, which will be amplified by matrix transformation. No evidence in that paper was found that the system works in practise.</p><p>Particle filter has been used for mobile robot localization many year <ref type="bibr" target="#b9">[10]</ref>, <ref type="bibr" target="#b10">[11]</ref>. The systems proposed in <ref type="bibr" target="#b1">[2]</ref>, <ref type="bibr" target="#b2">[3]</ref>, <ref type="bibr" target="#b8">[9]</ref> are all based on particle filter, however they typically require the smartphone's heading to be the same as the user all the time. Some existing work such as <ref type="bibr" target="#b23">[24]</ref>, <ref type="bibr" target="#b24">[25]</ref>, <ref type="bibr" target="#b25">[26]</ref> also integrate Wi-Fi fingerprinting with particle filter to improve accuracy, or they combine both Wi-Fi fingerprints and magnetic fingerprints <ref type="bibr" target="#b26">[27]</ref>. The main problem of using inertial sensors (pedestrian dead-reckoning) for localization <ref type="bibr" target="#b27">[28]</ref>, <ref type="bibr" target="#b28">[29]</ref> is that small errors in sensing may be magnified by integration <ref type="bibr" target="#b29">[30]</ref>. By introducing particle filter or other methods (i.e., kalman filter) for sensor fusion, the errors in measuring inertial sensors can be filtered out or minimized.</p><p>While we leverage on particle filter in this work, we have no restriction on phone orientation during localization. Mobile users are able to use their smartphones as usual. To achieve this, we propose a reliability-augmented particle filter that requires both the motion estimation and the magnetic fingerprinting models must be independent from phone orientation. To this extent, MaLoc is more practical than existing magnetometer based localization systems.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3">MAGNETIC FIELD AND MAGNETOMETER</head><p>In this section, we review the background of the geomagnetic field and magnetometer on smartphones, and conduct preliminary empirical studies.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.1">Characteristics of Magnetometer on Smartphone</head><p>The magnetic field value B p is measured by a smartphone's magnetometer. B e is the magnetic field vector at the same location in earth coordinate system, which is combined with the geomagnetic field and the magnetic field from the environment. B p is obtained by the phone rotated in yaw ψ, pitch θ and roll φ from B e , respectively. Its relationship with B e is defined as Equation ( <ref type="formula" target="#formula_1">2</ref>) in absence of noise <ref type="bibr" target="#b30">[31]</ref>.</p><formula xml:id="formula_0">B p = R x (φ)R y (θ)R z (ψ)B e<label>(1)</label></formula><formula xml:id="formula_1">B e = B geomagnetic + B environment<label>(2)</label></formula><p>where R z (ψ), R y (θ), R x (φ) are the corresponding rotation matrices. When we include the noise: hard-iron effect V and softiron effect W , B p is defined as Equation (3) <ref type="bibr" target="#b30">[31]</ref>.</p><formula xml:id="formula_2">B p = W R x (φ)R y (θ)R z (ψ)B e + V<label>(3)</label></formula><p>The hard-iron effect V is an offset vector and the soft-iron effect W is a matrix. Because of noise, when the smartphone is rotated at a fixed point, the locus of the magnetic reading will be an ellipsoid, as shown in Fig. <ref type="figure" target="#fig_0">1</ref>. If the magnetometer is perfectly calibrated, the locus will be closed to the sphere. Calibrating the magnetometer is mainly to find the hard-iron effect V and the softiron effect W . Besides the basic calibration method in <ref type="bibr" target="#b30">[31]</ref>, there are also various of calibration techniques have been proposed, such as <ref type="bibr" target="#b31">[32]</ref>, <ref type="bibr" target="#b32">[33]</ref>, <ref type="bibr" target="#b33">[34]</ref>. In addition, some smartphones may have been calibrated in hardware or system level. Different smartphones may have different types of magnetometers that vary in their sensitivities. Even the same type of smartphone may read different magnetic values at the same location. Figure <ref type="figure" target="#fig_1">2</ref> shows the magnetic readings captured by two Galaxy Nexus smartphones along a 50-meters long corridor. Their readings fluctuate at the same location, but the gradients of these two curves remain quite constant. This suggests that we can use the gradients of fingerprints instead of raw fingerprint values to avoid calibrating different magnetometers.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.2">Characteristics of Magnetic Field</head><p>The indoor magnetic field combines the geomagnetic field and the fields from ferromagnetic objects. We are interested to study the factors which may have influence on the magnetic field readings. Figure <ref type="figure" target="#fig_2">3</ref> shows the magnetic density map captured by a smartphone in a 16.3m×5.4m indoor area over one month. As we can see, magnetic field readings are quite stable over time, but changed significantly with locations. We also study the magnetic field readings when a smartphone is placed in different height, as shown in Fig. <ref type="figure">4</ref>. The magnetic readings are collected in a height of 0.5m, 1m and 1.5m from the floor, respectively, along a corridor. Considering errors in the location mapping, the differences are not as significant as the horizontal differences, and their gradients are still very similar. In addition, previous studies <ref type="bibr" target="#b3">[4]</ref>, <ref type="bibr" target="#b4">[5]</ref>, <ref type="bibr" target="#b5">[6]</ref>, <ref type="bibr" target="#b6">[7]</ref> also demonstrate that the effects caused by objects carried by the user, other pedestrians and the rearrangement of furniture are very limited. From these studies, we confirm the feasibility of using magnetometer on smartphone for indoor localization.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4">MALOC ARCHITECTURE</head><p>From system view, MaLoc consists of a client and a server. The client runs on smartphones to collect sensor data (i.e., velocity acceleration, angular velocity, and magnetic field reading). It then performs step counting, computes heading change ∆θ between two contiguous steps, and accesses magnetic values in each step. The preprocessed data will be sent to a server where an augmented particle filter, which operates dedicatedly for each user, performs computation and sends updated locations to each user.</p><p>The key component of MaLoc is an augmented particle filter we propose. The particle filter uses a set of particles to estimate the posterior distribution of a system-state conditioned on measurements. The system-state or user-state here is the user's position and heading:</p><formula xml:id="formula_3">s = (x, y, θ)<label>(4)</label></formula><p>where x, y represents the user's position and θ is the user's heading direction. A particle is a hypothesis for the user's state with a weight:</p><formula xml:id="formula_4">χ i =&lt; s i , w i &gt;<label>(5)</label></formula><p>where w i is the weight of the particle and its value is often evaluated by a probability model P (z|s). P (z|s) is the probability of observing z on state s, where z is the observation value. We use magnetic fingerprints as the main observation values z. A higher weight means it is more close to the true state, and the posterior distribution of user's state can be represented by a set of particles. The basic particle filter contains three essential components: the motion model, the measurement model and the resampling model, as presented in Algorithm 1. The motion model updates each particle's state by estimating user's motion leveraged on the inertial sensors. The measurement model then re-evaluates the particles' weights. Finally, the remaining particles refined by resampling will be more close to the true system state. As a rule, with the recursive operations of the three processes, the prediction for true state will become more and more accurate. Essentially, the performance of a particle filter based method completely depends on how these three models construct.</p><p>In MaLoc, shown in Algorithm 2, N particles are randomly sampled from the initial area given by a coarse-grained localization method. The loop is controlled by step counting. For each step a user moves, we will update the particles and prediction.</p><p>We construct the motion model as Equation ( <ref type="formula">6</ref>) and ( <ref type="formula">7</ref>):</p><formula xml:id="formula_5">θ t+1 i = θ t i + ∆θ + G θ (6) x t+1 i y t+1 i = x t i y t i + cos(θ t+1 i ) sin(θ t+1 i ) ×(l + G l ) (7)</formula><p>where l is the step length, ∆θ is the user's heading changes between two consecutive steps, G l and G θ are Gaussian noise.</p><p>Algorithm 1 Procedure of Basic Particle Filter Input: S t = {χ i |i = 1, 2, ..., N } representing the belief at time t. Output: S t+1 representing the belief at time t + 1.</p><p>1: for each particle do 2:</p><p>Update state s t+1 i using control information (motion model).  Estimate l and ∆θ.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>5:</head><p>for each particle do 6:</p><p>Update position and heading by motion model as Equation ( <ref type="formula">6</ref>) and ( <ref type="formula">7</ref>).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>7:</head><p>Evaluate the weight of particles by measurement model as Equation ( <ref type="formula" target="#formula_8">9</ref>).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>8:</head><p>end for 9:</p><p>Decide the amount of particles for each resampling method</p><formula xml:id="formula_6">N d and N h . (N = N d + N h ) 10:</formula><p>Resample N h particles by our heuristic resampling algorithm.</p><p>11:</p><p>Resample N BIS (&lt;= N d ) particles form old particles according to the distribution given by their weights. The amount N BIS is decided by our Bundle Iterative Sampling Algorithm.</p><p>12:</p><p>Normalize the weights.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>13:</head><p>Predict the user's state by Equation <ref type="bibr" target="#b9">(10)</ref>.</p><p>14:</p><p>if Kidnapped-prone scenarios detected then if Get out of kidnapped-prone scenarios then 18:</p><p>Restart particle filter. end if 22: end for Different from existing work <ref type="bibr" target="#b1">[2]</ref>, <ref type="bibr" target="#b2">[3]</ref>, <ref type="bibr" target="#b8">[9]</ref>, <ref type="bibr" target="#b34">[35]</ref>, the step length l is not constant in MaLoc, and it is estimated dynamically during localization. The step length is different from one user to another, and even one person's step length may be changed. Inaccurate step length estimation will lead to large localization errors, resulting in localization failure, which has been shown in the experiment in Section 10.2. We propose a dynamic step length estimation algorithm to effectively solve these uncertainties. The algorithm also makes MaLoc error tolerant in step counting. ∆θ is obtained by fusing the compass and the gyroscope sensor on smartphones. Generally, G l ∼N (0, σ l ) and G θ ∼N (0, σ θ ) are used to enlarge the diversity of particles.</p><p>Since we use magnetic fingerprint as observation value, then P (z|s) will depend on the intensity of changes of magnetic field at that location and on the age of the map, which difficult to obtain in reality. So the Gaussian pseudo-distribution <ref type="bibr" target="#b1">[2]</ref>, <ref type="bibr" target="#b2">[3]</ref>, <ref type="bibr" target="#b8">[9]</ref> are often used, as presented in Equation <ref type="bibr" target="#b7">(8)</ref>.</p><formula xml:id="formula_7">P (z|s) = 1 (2π) n/2 |V | 1/2 exp{- 1 2 [z -obv(s)] T V -1 [z -obv(s)]}<label>(8)</label></formula><p>where n is the dimension of z, V is the covariance, obv(s) is a function to get the observation value of state s in the fingerprint database.</p><p>In practice, obv(s) will return the fingerprint which is nearest to s geographically. For fast obtaining the nearest fingerprint, a hierarchical data structure has been designed. We split the fingerprint database into grid according to its location. We then build a hash function to map the grid with the set of fingerprints belongs to this grid. We also have a function grid(s) which finds the right grid state s belongs to in O(1) time. Therefore, when we search for the nearest fingerprint of s in database, we first find its corresponding grid, and then search the nearest fingerprint in this grid. The total search cost is O(m) + O(1), where m is the size of a grid. Compared with the K-D tree, this approach is easier to maintain.</p><p>As different smartphone's magnetic reading have bias, we evaluate each particle by Equation (9) instead of using a Bayes filter model w t+1 i = w t i P (z t+1 |s t+1 i ) or directly use w t+1 i = P (z t+1 |s t+1 i ) like others. In this way, MaLoc is more stable, and importantly it avoids calibrating different magnetometers.</p><formula xml:id="formula_8">w t+1 i = P (z t+1 -z t |s t i , s t+1 i ) = 1 (2π) n/2 |V | 1/2 exp{- 1 2 [(z t+1 -z t ) -(obv(s t+1 i ) -obv(s t i ))] T V -1 [(z t+1 -z t ) -(obv(s t+1 i ) -obv(s t i ))]}<label>(9)</label></formula><p>Resampling is to get rid of the particles with low weights, which contribute almost nothing to prediction, and put resources on particles that are close to the true state with higher probability. In this work, we resample new particles from last iteration particles according to the discrete probability distribution generated by their weights (i.e., a traditional resampling method), and propose a Bundle Iterative Sampling algorithm to adapt the sample size. However, this may result in loss of particle diversity and localization failure when noise (e.g., change of heading offset) is introduced. To address this, we propose a heuristic resampling method to work together with the traditional resampling method.</p><p>Finally, we estimate the true state with the weighted average of the current particles, as shown in Equation <ref type="bibr" target="#b9">(10)</ref>.</p><formula xml:id="formula_9">ŝ = N i=1 s i • w i (<label>10</label></formula><formula xml:id="formula_10">)</formula><p>where the weight w i has been normalized. As we can see, the current particles are generated from the last round of localization. If an error results in most of the particles close to the true state being wiped out, it may end up with wrong prediction in the following rounds of localization. To address this issue, we detect the scenarios (named kidnapped-prone scenarios) which are easily lead to localization failure. If we find one, we will then abort localization, and restart the particle filter.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5">MOTION MODEL</head><p>In this section, we introduce the methods for step counting, dynamic step length estimation, and heading change estimation. We also present the heuristic resampling algorithm along with heading changes estimation. The proposed augmented particle filter with dynamic step estimation and heuristic resampling will enhance the robustness of the existing particle filter.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.1">Steps Counting</head><p>We use accelerometer on smartphone for step counting. Since a user may carry smartphone in any orientation, we only extract the magnitude of the accelerometer reading. The mean filter is used to smooth the raw acceleration data. As shown in Fig. <ref type="figure">5</ref>, the acceleration values are captured by a smartphone carried in different ways, e.g., in hand, in the shirt pocket, and in the front pant pocket. The result shows that counting the number of peaks or valleys may not work for all cases. There are also many step counting algorithms in the literature <ref type="bibr" target="#b29">[30]</ref>, <ref type="bibr" target="#b35">[36]</ref>, which achieved hight accuracy. In this work, we use a simple one for lower computation overhead. We set four thresholds, T u acc , T d acc and T u time , T d time , to filter false cases. T u acc and T d acc are the upper bound and lower bound of the acceleration variance between two adjacent peak and valley. T u time and T d time are the upper bound and lower bound of the time interval between them. In this way, step counting achieves better accuracy.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.2">Dynamic Step Length Estimation</head><p>Simply, one can set a constant step length for each user. However, this is not practical as people's step lengths may vary widely. Even the step length of the same user may be changed from time to time. Since the precision of estimating a user's step length has a large impact on localization accuracy, we propose a dynamic step length estimation algorithm. It is based on this idea that when the particles are updated by the motion model, every particle evolve with different step lengths. The distribution of all particle's step lengths is D l ∼N (l, σ l ). Therefore, the average l ave = 1 N N i=1 l i will be very close to l. However, after resampling, all the particles will be re-evaluated and refined. A particle with a higher weight is more close to the true state. On the other hand, this particle's step length is also closer to the true step length. The weighted average step length after resampling is defined as Equation <ref type="bibr" target="#b10">(11)</ref>.</p><formula xml:id="formula_11">l weighted = N d i=1 l i • w i (11)</formula><p>where N d is the number of particles sampled from old particles (See Algorithm 2), because only these parts of particles evolve from the old particles by taking a step. We then conclude that if the particle filter converges in the right way, l weighted will tend to be the true step length. Certainly, if the particle filter cannot converge correctly, this theory may not be guaranteed. Based on this theory, we design a dynamic step length estimation algorithm. Instead of just using l weighted as step length, we design a queue Q size of Q size to cache the most recent l weight . Their average value is used as the estimation of step length for the next round of localization. In practise, the user's initial step length l 0 is set according to his weight and height, and we consider merging it with the average weighted step length.</p><formula xml:id="formula_12">l e = α • 1 Q size Qsize i=1 l i weighted + (1 -α)l 0<label>(12)</label></formula><p>In this way, we can prevent the accidental bad converge result from influencing the estimation. Considering when the user's heading changes, his step length may have some changes, resulting in uncertain influence on the step length estimation. In our algorithm, we will not put this part into the queue. Compared with the step length estimation methods in <ref type="bibr" target="#b27">[28]</ref>, <ref type="bibr" target="#b29">[30]</ref> who update step length model only at the turning, our algorithm can update step length in real time and does not depend on the accuracy of turning detection.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.3">Heading Change Estimation and Change of Heading Offset</head><p>Determining the heading of a user is difficult, even the compass sensor is precise in indoor environments since the user's heading may be different from phone heading (a.k.a. heading offset). In this work, we assume the initial orientation of the user is unknown, which may not be the same with the phone, and eventually we use the augmented particle filter to obtain the user's heading. The heading change between two consecutive steps ∆θ is required by the motion model. It is reasonable that we assume the phone heading is relatively stable with the user when walking. Certainly, the assumption cannot hold all the time as the user may use the mobile phone for other tasks during localization, such as receiving a phone call and sending a message. These interference motions may change the heading offset and bring errors into heading change estimation. Therefore, there are two issues here:</p><p>(1) how to estimate the phone's heading change between two consecutive steps regardless of its orientation and position; <ref type="bibr" target="#b1">(2)</ref> how to eliminate the error introduced by the change of heading offset.</p><p>Compass and gyroscope on smartphone can be used to estimate phone's heading change between two adjacent steps. Since compass may be affected by some ferromagnetic objects in indoor environments, we also investigate the performance of gyroscope on smartphone. The gyroscope on smartphone measures the angular velocity around the phone's x, y and z axis, respectively. Usually, gyroscope readings are typically integrated over time to calculate phone's rotation, i.e., rotation angle change. However, we cannot get the heading changes directly as the phone's orientation is unknown. A feasible method is to make use of the gravity sensor on smartphone to obtain angle change around the gravity direction, which is the same as heading change. Figure <ref type="figure">6</ref> compares the performance of heading change estimation using both compass and gyroscope. It depicts the angle changes from the start point when walking along a straight line and a 90-degree corner. As we can see from the figure, gyroscope measurements are more stable than that of compass when walking along a straight line or turning normally. However, when turning fast, errors in the gravity sensor will result in large accumulated errors of gyroscope. Therefore, a wise method is to use a Kalman filter to fuse it with compass when the gyroscope shows the current heading change is little or relatively slow. In this way, we can avoid the interference of ferromagnetic objects on compass measurements. However, when gyroscope shows a fast or heavily heading change, we can only count on compass.</p><p>The change of heading offset has certainly negative impact on traditional particle filter based methods. For example, in the case that the user answers a phone call while walking, the user's heading keeps the same but the phone's heading may be changed 180 degrees. As a result, all particles reverse their headings and then get lost in the trap. The localization error will become bigger and bigger, and eventually result in localization failure. Therefore, detecting large heading change of the phone is risky (it may be done by the user's turning or the change of heading offset). We propose a heuristic algorithm to solve this problem, inspired by the random particle filter <ref type="bibr" target="#b11">[12]</ref> which randomly samples new particles when the total non-normalized weight decreases. Our algorithm heuristically samples parts of new particles in the resampling phase instead of only sampling from the old particles (See Algorithm 2). How to generate new particles and how many particles are related to the phone's heading changes of this step. We have the following rules.</p><p>(1) The number of new particles N h is proportional to ∆θ. To implement it in MaLoc, we present Equation <ref type="bibr" target="#b12">(13)</ref>.</p><formula xml:id="formula_13">N h = ∆θ•p π N, N h ≤ N (<label>13</label></formula><formula xml:id="formula_14">)</formula><p>where p is the parameter to control the sensitivity (usually chosen from [0.5, 0.85] in our experiments), and N is the total number of particles. (2) The position of new particles are randomly sampled from the r-meter range of the previous predicted location (x, ŷ). r can be a constant value or a variable related to ∆θ. For simplicity, we set it as a constant value in our experiments. (3) The initial heading of new particles are also randomly sampled from the range [ θ, θ + 2∆θ] or [ θ + 2∆θ, θ]. θ is the previous predicted heading.</p><p>The heuristic resampling algorithm can also increase the diversity of particles, which will make the particle filter more robust and tolerate more motion estimation errors, with the cost of decreasing the localization precision.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="6">MAGNETIC MEASUREMENT MODEL</head><p>The magnetic measurement model evaluates particles based on the magnetic field observations captured from smartphones. As mentioned before, a magnetometer reading consists of a threedimensional vector B p = (B x , B y , B z ), representing the magnetic value along the phone's x, y, and z axis, respectively. Generally, there are three ways of using B p as observation values.</p><p>Using B p directly as observation z [2], <ref type="bibr" target="#b2">[3]</ref>, <ref type="bibr" target="#b5">[6]</ref>, <ref type="bibr" target="#b8">[9]</ref>. One method is to collect the magnetic field readings of all directions at any location, which not only increases the training cost rapidly, but also reduces the accuracy as the sample space becomes larger. Alternatively, we can estimate phone orientation and transform B p to the earth coordinate system B e . However, this is errorprone because orientation estimation usually contains errors and these errors will be amplified on B e . Both of these two methods have a serious problem that they require the phone's heading to be the same as the user's heading during localization. Because in the measurement phase, each particle obtains the reference fingerprint B x,y,θ at a location from the database according to its position (x, y) and heading θ (not phone's heading θ p due to inaccurate compass readings). As θ represents user's heading, if it is not the same as the phone's heading θ p , the magnetic field reading on smartphone cannot map with any particle's observation B x,y,θ as it should be mapped to B x,y,θp . This may result in localization failure. Therefore, using this type of observation on smartphone is not practical.</p><p>Using the magnitude B of B p as observation <ref type="bibr" target="#b1">[2]</ref>, <ref type="bibr" target="#b3">[4]</ref>. B is a rotation invariant scalar quantity and quite stable. However, the elements in each fingerprint will drop from three to one, reducing the uniqueness of each fingerprint. In large indoor environments, the particle filter may need more time to converge to the right location.</p><p>Extracting the horizontal component B h and vertical component B v of B p as observation <ref type="bibr" target="#b6">[7]</ref>. The gravity sensor on smartphone provides us the direction of gravity (i.e., the vertical direction). We can extract both the vertical and horizontal components of B p and construct a new observation value (B h , B v ) (named HV fingerprint). Figure <ref type="figure" target="#fig_6">7</ref> shows the magnetic field map of these two components in an indoor area. Obviously, it is more unique than the magnitude fingerprint, which will make the particle filter converge to the right location faster. This fingerprint concept was first mentioned in <ref type="bibr" target="#b6">[7]</ref>, but there is no real-world system using this model. That is because when a user stands still, the gravity sensor reading is very precise. However, when the user moves, noise will be introduced, resulting in decreasing in accuracy or even ending up with failure.</p><p>In MaLoc, we combine both B and (B h , B v ) using a hybrid measurement model. The HV fingerprint has the advantage of more uniqueness, and it makes the particle filter converge to the right location faster. However, it is not as stable as the magnetic magnitude fingerprint. Therefore, we use the HV fingerprint to accelerate the convergence of MaLoc when localization starts, and then we switch it to the magnetic magnitude fingerprint for "tracking".</p><p>Since calibrating the offset of different phones' magnetometers is very costly, we just use the variance of the fingerprint value between two consecutive steps (the gradient) instead of using the fingerprint itself to avoid calibrating different magnetometers. As we mentioned before, it is also less sensitive with the changes of magnetic field in the vertical direction and the changes along with time. This is one of the reasons that we use Equation ( <ref type="formula" target="#formula_8">9</ref>) to evaluate the particles. Another one is that although using the Bayes filter model to evaluate the particles will make particle filter converge more quickly and good for exposing localization failure, it also makes the particle filter become very sensitive to noise and may fail easily.</p><p>In a very large indoor environment, these fingerprint models or measurement models may not be suitable for localization because the particle filter will need too many particles and a long period of time to converge, incurring high computational overhead and reducing the usability. To address this issue, we leverage on a simply coarse-grained localization method <ref type="bibr" target="#b2">[3]</ref>, <ref type="bibr" target="#b5">[6]</ref> (with 10m∼20m or room level accuracy) which narrows the searching space in the initial phase only.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="7">BUNDLE ITERATIVE SAMPLING ALGORITHM</head><p>As the computation overhead of particle filter is proportional to the number of particles, reducing the number of particles will obviously improve the computation efficiency of particle filter. However, when we decrease the number of particles, the stability of particle filter may degrade too. Clearly, there exists a tradeoff between the computation overhead and the stability or robustness of particle filter. As we discussed in Section 4, a promising solution to reduce computation overhead is to dynamically adjust the number of particles. This is so called adaptive particle filter, and two main adaptive sampling algorithms exist in the literature. The first one is likelihood-based adaptation <ref type="bibr" target="#b9">[10]</ref>. The idea is when the non-normalized sum of likelihood (i.e., importance weights) less than a pre-specified threshold, the sampling will stop. However, this approach may not work well in symmetric environments or environments with high likelihood (i.e., different positions have a similar observation value). Hence, this algorithm cannot be applied to magnetic fingerprinting based localization. The other algorithm is KLD-Sampling <ref type="bibr" target="#b36">[37]</ref>, <ref type="bibr" target="#b37">[38]</ref> which uses the Kullback-Leibler distance (KL-Distance) to determine the sample size. The key idea of KLD-sampling is to bound the error introduced by the samplebased belief representation. At each iteration, this approach generates samples until their number is large enough to guarantee that the KL-distance between the maximum likelihood estimate and the underlying posterior does not exceed a pre-specified bound ǫ <ref type="bibr" target="#b38">[39]</ref>. Nevertheless, the KLD-Sampling algorithm needs to compute the quantity of the chi-square distribution to check if it is the time to stop sampling in each iteration, hence it involves extra computation overhead. In addition, the KL-distance bound ǫ is not a readily comprehensible variable that is easy to choose. In MaLoc, we propose a more efficient and comprehensible adaptive sampling algorithm -Bundle Iterative Sampling (BIS).</p><p>The basic principle of BIS is described as follows. The reason why we need so many particles is that we intend to cover as many as possible state spaces. When re-sampling particles one by one, if we find that sampling more particles will not cover new state space, it is not necessary to continue sampling. The procedure of BIS is listed in Algorithm 3. First, we reset all bins to "unoccupied". Here, bins are implemented as a three dimensional grid (i.e., 0.5m * 0.5m * 45 • ) <ref type="bibr" target="#b39">[40]</ref>. We will then sample particles bundle by bundle. One bundle has BUNDLE SIZE number of particles. We can sample no more than N d particles, i.e., at most N d /BUNDLE SIZE bundles. In each bundle, we sample particles from old particles according to their weights. For each new sampled particle, we check if it occupies a new bin. We define that a new bin is occupied when it contains at least OCCUPY THRESHOLD (i.e., 2) particles. In addition, the coordinates of these occupied bins will be recorded. Then, we can only reset the occupied bins to unoccupied instead of iterating all bins and setting them to unoccupied in the first step. This can reduce some computation overhead as the number of occupied bins is often much less than the number of bins, i.e., often two order of magnitude less. After resampling a bundle of particles, we count how many new bins are occupied. We can now compute the number of new occupied bins BINS INC in a sliding window with a length of WINDOW SIZE bundles. If it is less than a certain threshold BINS INC THRESHOLD, that means sampling more particles will not bring more bins and we should stop sampling. Fig. <ref type="figure" target="#fig_7">8</ref> shows an example of how the BIS algorithm works. At the initial phase, we can see sampling new particles will always create new bins. However, after particles converge, several bundles of particles may only occupy one new bin, which indicates sampling can stop. Now, we show that BIS is able to achieve comparable precision and accuracy to a fixed-size particle filter. That means we have to show particles share similar distribution in both BIS and fixedsize sampling algorithm. Generally, the accuracy of particle filter depends on the state space size that particles can cover. This is obviously guaranteed in BIS because sampling stops when particles cannot occupied more bins. And the precision is related to the space distribution of particles (i.e., the convergence degree of particles). Assume when BIS stops, it has sampled N BIS (&lt;= N d ) particles. At this time, sampling more particles will not occupy new bins. Note that the space distribution of these N BIS particles is p 0 . After sampling N BIS particles (S 0 ), we continue sampling another N BIS samples (S 1 ) (note that its distribution is p 1 ). for i = 1:BUNDLE SIZE do 7:</p><p>Sample a particle P j from the discrete distribution given by their weights 8:</p><p>if P j occupy a new bin then if BN &gt;= WINDOW SIZE then 14:</p><p>for i = 0:WINDOW SIZE-1 do end if 21: end for S 0 and S 1 are sampled from the same discrete distribution, and they all fall in the same bins (saturated), implying that their distributions are quite similar, denoted as Distance(p 0 , p 1 ) &lt; ǫ, where Distance(p, q) measures the difference between the two probability distributions p and q as follows.</p><formula xml:id="formula_15">Distance(p, q) = x |p(x) -q(x)|<label>(14)</label></formula><p>If we sample N d particles (the distribution is p d ), we need to prove Distance(p 0 , p d ) &lt; ǫ, which is shown as follows.</p><p>We sample k = ⌈ N d NBIS ⌉ particle sets with a size of N BIS and merge them to get a new distribution p 0,1,...,k-1 . Then we have Distance(p 0 , p d ) ≈ Distance(p 0 , p 0,1,...,k-1 ), as k</p><formula xml:id="formula_16">• N BIS ≥ N d . Distance(p 0 , p 0,1,...,k-1 ) = x |p 0 (x) -p 0,1,...,k-1 (x)| = x p 0 (x) - k-1 i=0 p i (x) k ) = x k-1 i=1 (p 0 (x) -p i (x)) k ) &lt;= 1 k x k-1 i=1 |p 0 (x) -p i (x))| = k -1 k ǫ<label>(15)</label></formula><p>This implies that sampling N BIS particles shares a similar distribution with sampling N d particles. Therefore, BIS achieves comparable precision with fixed-size particle filter.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="8">KIDNAPPED ROBOT PROBLEM</head><p>When applying particle filter for localization in reality, we may have the following problem. If there exist much noise or many   errors in sensor data, the particles which are close to the true state may be wiped out during the resampling phase and the particle filter turns "stranded". This is often called "Kidnapped Robot Problem", i.e., particle filter is difficult to recover, especially in a complex environment. When all particles are put to wrong locations, their non-normalized weights may not be down to zero immediately as some wrong particles' observations may be very similar to observed magnetic readings. Even at last, the particle filter realizes that none of the particle's observations is within a reasonable range, the time it takes for that may be unacceptably long.</p><p>Many approaches have been proposed to address this problem in robot self-localization. 1) A simple but effective method is to add a small number of uniformly distributed, random samples after each update <ref type="bibr" target="#b9">[10]</ref>. An improved method is named sensor resetting <ref type="bibr" target="#b11">[12]</ref>, <ref type="bibr" target="#b40">[41]</ref>, i.e., the number of samples to add depends on how badly the current set of samples seems to represent the location. However, the observation environment of magnetic based indoor localization is much more complex and with high likelihood, we will need many random samples, which is not practical. 2) In mixture MCL <ref type="bibr" target="#b10">[11]</ref>, a reverse particle filter is proposed. It introduces new samples according to observation first and then weights them according to the existing probability distribution over pose. This does not fit MaLoc for the same reason -too many samples are needed. 3) In <ref type="bibr" target="#b41">[42]</ref>, the particle filter is restarted when the particle cloud diverges over a threshold from the observations. This method has shown an improvement of 36% in localization accuracy. This method fits MaLoc well. However, the thresholds in this method are hard to decide, especially in a complex environment.</p><p>In MaLoc, we propose an approach to "solve" the kidnapped robot problem in magnetic based indoor localization scenarios from a difference perspective. From our experiments, we first find the scenarios in which localization often failed when using a traditional particle filter: 1) In the beginning process of localization using a small sample set; 2) Suddenly shaking or moving the phone results in large heading offset change; 3) Putting phone in pant pocket. 4) Shaking phone in hand heavily while walking or running.</p><p>The first case can be handled by our adaptive sampling method. We can use more particles at the initial phase and then our bundle iterative sampling algorithm dynamically decides how many particles it require in the following updates. The second one has been solved by our heuristic sampling algorithm. The more challenging problem lies on the last two scenarios (i.e., kidnapped-prone scenarios). After comprehensively analyzing the sensor data collected in these two scenarios, we have the following obversations. Shaking phone in hand or in pant pocket will not only result in continuously heading offset change, but also will introduce much noise in magnetic readings because magnetometer on smartphone has not been calibrated perfectly and many smartphones come with poor quality magnetometer. Figure <ref type="figure" target="#fig_11">9</ref> shows the magnetic readings collected on a 12-meter corridor using a Nexus 3 and Nexus 5, respectively. For each phone, we collect the data in two scenarios -1) putting in the front pant pocket and 2) holding in hand steadily at the same height of pant pocket. As we can see, when putting Nexus 3 in pant pocket, the magnetic reading will be affected too. At this time, the heading information and magnetic readings both contain too much noise, which is out of the tolerance range of particle filter. Therefore, our strategy is to abort localization when we discover the kidnapped-prone scenarios and restart the particle filter. Detecting kidnapped-prone scenarios is easy. In both of these scenarios, the heading measured by gyroscope will present quickly and periodically changes, as shown in Fig 10 . Then we can use an algorithm similar to step counting to detect this pattern.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="9">MAPPING THE MAGNETIC FIELD</head><p>There are many of magnetic mapping methods <ref type="bibr" target="#b42">[43]</ref> or SLAM methods <ref type="bibr" target="#b43">[44]</ref> proposed for robot localization based on magnetic field. In this section, we use crowdsourcing to enable fast and low-cost collection of the magnetic field fingerprints using smartphones. This method is inspired by IndoorAtlas <ref type="bibr">[45]</ref>. As shown in Fig. <ref type="figure" target="#fig_0">11</ref>, the data collector requires walking along these lines to cover an area. On each line, we set the starting point, the heading direction and the path length. We then walk along this path with a slow and constant speed. In this process, the tool application will record data captured by the magnetic sensor on smartphone. A magnetic fingerprint collected will be stored as &lt; B h , B v &gt; and the magnitude can be computed from it. We simply assume the data collector walking at a constant speed. Each magnetic fingerprint can then be mapped with its location easily. To avoid large mapping errors, each line should not be too long. On each line, we collect intensive magnetic fingerprints, e.g., one fingerprint every 0.1 meter. The distance between the two lines is about 0.6 meter in our experiment. We then fill the fingerprints into this area by interpolation. Eventually, we obtain a magnetic fingerprint in every 0.1m×0.1m square. </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="10">EVALUATION</head><p>We conducted extensive experimental studies in a large building. Figure <ref type="figure" target="#fig_13">12</ref> shows the floor plan of the building. Our study involves 7 volunteers who are mainly students in a local university. Several smartphone models are used, including Google Nexus, Samsung Galaxy, HTC, and Moto. The MaLoc software is pre-installed into these smartphones for collecting user traces. We modify and attach an ink stamper on each volunteer's shoes. While a user walks each step, it will leave a stamp (e.g., an ink mark) on the floor surface. In this way, we obtain all the traces and the ground truth. To avoid more tedious ground truth measurement, in our trace collection, all the volunteers are required to follow these routines step by step. We collect traces over a period of several months. For our experiments, we first focus on evaluating individual techniques we proposed: 1) How much step counting errors can MaLoc tolerate; 2) How well the dynamic step length estimation performs; 3) How well the heuristic resampling algorithm performs; 4) Performance comparison of particle filters with different types of magnetic fingerprinting models; 5) How well the adaptive sampling algorithm performs. We then evaluate the overall performance of MaLoc, including the overall localization accuracy in different scenes or different conditions, the localization accuracy with different walking paths, and the energy consumption in comparison to the Wi-Fi fingerprinting based localization approach.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="10.1">Effects of Errors in Step Counting</head><p>In the first experiment, we evaluate the influence of step counting error. Figure <ref type="figure" target="#fig_14">13</ref> shows both localization errors of the traditional particle filter and our augmented particle filter (without adaptive sampling algorithm) in presence of random miscounting steps. The user walks about 300 steps. The traditional particle filter functions correctly until miscounting reaches 50. However, our augmented particle filter tolerates more miscounting steps, i.e., 80 steps. It is not only because of the heuristic resampling method increases the diversity of particles, but also dynamic step length estimation can compensate miscounting steps. In this experiment, the true step length of the user is about 0.6∼0.65m. The average estimated step length measured by our augmented particle filter is 0.68m when miscounting is 10 steps, but it increases to 0.77m when miscounting goes up to 50 steps.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="10.2">Performance of Dynamic Step Length Estimation</head><p>Next, we test our proposed dynamic step length estimation. In this experiment, we set σ l to 0.2 and Q size to 5. The user's true step length is about 0.6∼0.65m. Figure <ref type="figure" target="#fig_15">14</ref> compares our augmented particle filter (without heuristic resampling and adaptive sampling algorithm) with the traditional one for localization errors when we set the step length to different values (i.e., 0.5m, 0.6m, 0.7m and 0.8m, respectively). As shown in the figure, when the step length deviates much from the true step length in the traditional particle filter, we observe poor accuracy. The traditional particle filter fails to localize when the step length is set to 0.8m. However, our augmented particle filter with dynamic step length estimation is not so sensitive to the initial step length. The experiment implies that although errors exist in the initial step length, we still achieve good accuracy. In addition, we find that the average step length of the localization process is around 0.67m, no matter what the initial step length is. This implies, after a period, we can infer the user's average step length. However, our dynamic step length estimation algorithm may fail when the initial step length deviates from the true step length too much. We hence set the average step length as the initial value in MaLoc, which works well in practice.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="10.3">Performance of Heuristic Resampling Algorithm</head><p>We evaluate the heuristic resampling algorithm from two aspects: processing the error of heading change estimation and processing the occasional change of the heading offset. First, we run the particle filter 100 times with precise step counting and a constant step length, respectively. The traditional particle filter fails to localize 4 times as there are errors in heading change estimation causing localization failure. In contrast, our particle filter (only integrate with the heuristic resampling algorithm) localizes all correctly (i.e., 100 times), demonstrating its advantage in robustness compared to the traditional particle filter. Second, we run an experiment to verify the ability of processing the occasional change of heading offset. We use a trace in which the user walks along a 24-meter corridor and answers a phone call while walking. We compare the traditional particle filter and our augmented particle filter for localizing his position. The results are presented in Fig. <ref type="figure" target="#fig_17">15</ref>. We observe from the result that the heading offset change only temporarily influence the localization accuracy of MaLoc, but it causes the traditional particle filter converge to wrong locations.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="10.4">Effects of Different Types of Observation Values</head><p>To compare the performance of different types of magnetic observation values, we conduct an experiment in a hall, in which the traditional particle filter will need a longer period to converge.        The user held his smartphone in hand and walked 69 steps in total. He started from a hall, walked about 27 steps and then turned left into a corridor. Figure <ref type="figure" target="#fig_18">16</ref> depicts the localization results of MaLoc using three different fingerprinting models as observation. As we observe from the figure, the HV fingerprint is sensitive to the user's turning motion but it has a faster convergence rate. Using the magnetic magnitude fingerprint is more robust, but it has a lower convergence rate than the HV fingerprint does. This shows clearly that the hybrid model certainly takes advantages of both models.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="10.5">Evaluation of Bundle Iterative Sampling</head><p>We now evaluate the influence of different parameters on the performance of BIS. The key parameter in BIS is BINS INC THRESHOLD. In this experiment, we set BIN-S INC THRESHOLD to 4 (dash line), 6 (concrete line) and 8 (dot-dash line), respectively, and other parameters are set as follows. Max Particles = 2000, BIN SIZE = 0.5m * 0.5m * 45 • , BUNDLE SIZE = 50, WINDOW SIZE = 4, OCCU- PY THRESHOLD = 2. Fig. <ref type="figure" target="#fig_19">17</ref> shows the sample size (include heuristic sampled particles) during a typical localization using BIS. The result shows that the average sample size of each running is 822, 683, and 562, respectively. We observe that a larger BINS INC THRESHOLD results in a smaller sample size.</p><p>To test the efficiency of BIS, we conduct the following experiment. A user walks about 300 steps, and we then observe the execution time while varying the maximum number of particles from 1000 to 3000. This experiment runs on a ThinkPad notebook (X1 Carbon), with an i7-2GHz CPU and 8G memory. The result is shown in Fig. <ref type="figure" target="#fig_21">18</ref>. As we can see, the execution time of BIS(BINS INC THRESHOLD=4) is almost not affected by the maximum particle number, and it always maintains high efficiency. This is because BIS strategically samples particles that are just enough to cover the current possible state space. In most of the cases, it does not need so many particles like the traditional particle filter. BIS is only sensitive to parameters such as BINS INC THRESHOLD, and BUNDLE SIZE.</p><p>While BIS works efficiently, we are also interested in knowing if BIS has any negative effect on localization accuracy. Fig. <ref type="figure" target="#fig_22">19</ref> shows the localization accuracy comparison between fixedsize particle filter and BIS particle filter set with different BIN-S INC THRESHOLD (i.e., 4 and 6, respectively). We observe that BIS particle filter achieves similar accuracy to the fixedsize version when the maximum particle number is large enough. However, when the maximum particle number is too small, both of them may decrease in localization accuracy. In addition, if BINS INC THRESHOLD is set too large, it may easily run into localization failure. Since the efficiency of BIS particle filter is almost not affected by the maximum particle number, in practice, we set a slightly higher maximum particle number to make it being able to survive in extremely noisy environments with a high probability.</p><p>We now discuss the effect of different combination of BUNDLE SIZE and WINDOW SIZE. Basically, we only need to count how many new bins are occupied when sampling BUNDLE SIZE×WINDOW SIZE (denoted as WIN-DOW SAMPLE SIZE) particles. The reason why we split a sample set into bundles and count new bins in a sliding window instead of counting WINDOW SAMPLE SIZE particles directly is to ensure reducing sample size both effectively and efficiently. In this experiment, we set BUNDLE SIZE×WINDOW SIZE to 200, and evaluate different dividing methods, i.e., 10 × 20, 20 ×    Fig. <ref type="figure" target="#fig_23">20</ref> shows how the average sample size changes with the bin size. BINS INC THRESHOLD changes from 1 to 8. It is not surprising to observe that for fixed BINS INC THRESHOLD, the sample size increases with smaller bins. This is because the same set of particles can easily occupy more small bins. But a bigger bin with a big BINS INC THRESHOLD may result in localization failure. Fig. <ref type="figure" target="#fig_24">21</ref> illustrates the average localization accuracy during a typical localization case. For fixed BINS INC THRESHOLD, localization algorithm runs 10 times. It shows that with a bin size of 1m×1m×90 • , MaLoc may be vulnerable to failure when BIN-S INC THRESHOLD goes larger than 1. Therefore, in practice, we first choose a reasonable bin size (i.e., 0.5m × 0.5m × 45 • ), then adjust other parameters to achieve the best performance.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="10.6">Overall Performance of MaLoc</head><p>We first evaluate MaLoc in different scenes: the hall, the conference room, the office area (mainly corridors) and the library, as shown in Fig. <ref type="figure" target="#fig_25">22</ref>. The localization results are shown in Fig. <ref type="figure" target="#fig_8">23</ref>. From the figure, we observe that while MaLoc performs well in general, the performance in the conference room, the office area, and the library is much better than that in the hall. One observation is that the floor plan in each of these three scenes is relatively complex than that in the hall. This bring many physical constrains, which will limits the possible behaviors of the user and improve localization accuracy. In addition, more complex building construction may lead to serious magnetic distortion which implies better magnetic fingerprints produced. For further investigation, we collect two different straight trajectories in the hall, one is near to the wall and the pillars (Path A), the other one is in the middle of the hall (Path B), as shown in Fig. <ref type="figure" target="#fig_13">12</ref>. In Fig. <ref type="figure" target="#fig_1">24</ref>, we can see that the magnetic reading on Path A fluctuations much more than Path B. As a result, MaLoc performs more accurately in Path A than Path B. We now move to evaluate how noise in motion estimation and magnetic measurement affect localization accuracy and precision. We conduct six experiments with a user holding his smartphone with four different postures, including: 1) holding the phone at a height of 0.6m by hand while keeping the same direction as his heading; 2) holding the phone at a height of 1m by hand; 3) holding the phone at a height of 1.4m by hand; 4) putting it in his coat pocket; 5) shaking it slightly left and right; 6) holding by hand and swinging along with his arm slightly while walking. We then compare MaLoc with the Wi-Fi fingerprinting based method, as shown in Fig. <ref type="figure" target="#fig_1">25</ref>. The results show that holding by hand yields the most accurate result because it introduces less noise in both motion estimation and magnetic measurement (magnetic fingerprints are collect at the height of 1m). And the height of the phone has little impact on localization accuracy. As mentioned in Section 3, magnetic reading at a fix point's different height shows little difference and the phone is hold on hand in the first three experiments, the result can illustrate little magnetic measurement noise just have limited influence on localization accuracy. Shaking the phone while walking or putting the phone in pocket will result in decreasing of accuracy and precision. It implies that the more noise introduced during magnetic measurement (phone' orientation change will also have some influence on magnetic measurement) and motion estimation, the greater decreased in localization accuracy.</p><p>We also build a simple Wi-Fi fingerprinting based localization system. When user walking along a line to collect magnetic fingerprints, it will collect Wi-Fi fingerprints simultaneously (scanning period is 3 seconds). Then we use KNN algorithm to localize. In our Wi-Fi fingerprint database, the average number of AP in each Wi-Fi fingerprint is 6.46, which is quite dense. The 50% and 80% errors of the Wi-Fi fingerprinting based approach is 2.5m and 4.5m, respectively, and the average localization accuracy is 3.5m. However, when holding the phone in hand at the height of 1m, the average accuracy of MaLoc with 50% errors and 80% errors is 0.8m, 1.6m, and 1.0m, respectively. Even in the worst case (i.e., coat pocket), the average accuracy of MaLoc is 2.0m which is also much better than Wi-Fi fingerprinting.</p><p>To evaluate the performance of MaLoc in different trajectories,   we select three typical trajectories (as shown in Fig. <ref type="figure" target="#fig_13">12</ref>): a straight line in corridor (Path 1), a trajectory with a corner in an open area (Path 2), and a rectangle trajectory in an open area (Path 3). Figure <ref type="figure" target="#fig_1">26</ref> depicts the magnetic readings and the localization results when a user walks along these trajectories. The magnetic readings on these three trajectories fluctuates comparably, but they have different the convergence rate and localization precision. It shows that converging in a corridor (i.e., Path 1) seems faster than the other two paths because of the physical limits of the map and any turning actions of the user temporally decreases localization precision as new random particles are sampled.</p><p>In the last experiment, we evaluate the energy consumption of MaLoc. To save energy, MaLoc only performs limited computation on smartphone such as collecting sensor data and preprocessing, step counting, and heading change estimation, and leaves heavy computation to server. We conduct this experiment using a Samsung Galaxy Nexus smartphone, and compare the energy consumption in three scenarios: running nothing, running trace collection application of MaLoc only, and running the Wi-Fi scanning application only. All of the sensors' sampling frequency in MaLoc is set to SENSOR DELAY NORMAL and the frequency of Wi-Fi scanning is set to 2 seconds. To get rid of the influence of other applications, as some applications may have background data, we close the network communication module and don't let the two localization application send requests to Server for localization in both experiments. So the energy consuming only compare the sensing and preprocessing part of MaLoc with Wi-Fi scanning. We think it is fare as both of MaLoc and Wi-Fi fingerprinting technology require requesting to Server for localization. Moreover, their request frequency and request data size are comparable (MaLoc only send a request for localization when detect at least 2-3 steps). To prevent smartphone from entering the hibernating mode, we keep the smartphone's screen active during our experiment. Figure <ref type="figure" target="#fig_6">27</ref> shows the energy consumption in these three scenarios. From the result, we observe that running MaLoc trace collection application saves about 1 hour battery life than running the Wi-Fi scanning application. The average current consumed when running MaLoc is about 220mA. Thus, we conclude that MaLoc saves about 220mA•h energy than Wi-Fi scanning within about 6 hours.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="11">CONCLUSION</head><p>In conclusion, this paper presents a novel indoor localization system named MaLoc. It utilizes magnetic sensor data and inertial sensor data on smartphones by a reliability-augmented particle filter. The most important feature of MaLoc is that it does not impose any restriction on smartphone's orientation, and users are free to use their phones in whatever ways they like during localization. We propose a hybrid magnetic measurement model, which improves the performance of MaLoc and avoids calibrating different magnetometers. Moreover, we propose a set of novel techniques to improve MaLoc's robustness and usability. Through comprehensive experiments based on the traces collected in a large building, we demonstrate that MaLoc is more accurate and energy efficient than the Wi-Fi fingerprinting based technique.</p><p>The experimental study in this paper has a limited scope since we focus on a university building only. We plan to further develop MaLoc and make it available for both Google Play and Apple Store, and collect public user traces in a variety of indoor spaces such as shopping malls, hotels, and commercial office buildings for more extensive evaluations. We also plan to crowd-source magnetic fingerprints leveraging on the public, and further develop the crowdsourcing method to ensure the quality of magnetic fingerprints since magnetic fingerprints should be collected more tenuously than Wi-Fi fingerprints.</p></div><figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_0"><head>Fig. 1 .</head><label>1</label><figDesc>Fig. 1. Locus of magnetic readings with the optimum ellipsoidal fit superimposed.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_1"><head>Fig. 2 .</head><label>2</label><figDesc>Fig. 2. Magnetic readings captured by two smartphones along a 50-meter corridor.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_2"><head>Fig. 3 .</head><label>3</label><figDesc>Fig. 3. Magnetic field map captured by smartphones over one month.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_3"><head>3 :</head><label>3</label><figDesc>Compute the weight w t+1 i based on likelihood of observation value z t+1 (measurement model).</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_4"><head>6 :Algorithm 2</head><label>62</label><figDesc>Resample N particles from old particles according to the discrete distribution given by their weights. Procedure of MaLoc 1: state=LOCALIZING 2: Generate N random particles from an initial area. 3: for each step do 4:</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_5"><head>Fig. 4 .Fig. 5 .Fig. 6 .</head><label>456</label><figDesc>Fig. 4. Magnetic readings captured by smartphone with different heights.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_6"><head>Fig. 7 .</head><label>7</label><figDesc>Fig. 7. Magnetic field map of the horizontal component (left) and vertical component (right) in a 16.3m x 5.4m indoor area.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_7"><head>Fig. 8 .</head><label>8</label><figDesc>Fig. 8. An example of Bundle Iterative Sampling algorithm.</figDesc><graphic coords="8,48.00,43.70,255.10,82.90" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_8"><head>Algorithm 3</head><label>3</label><figDesc>Bundle Iterative Sampling Algorithm 1: Reset bins to unoccupied. 2: MAX BN = N d / BUNDLE SIZE 3: k = 0 4: for BN = 1:MAX BN do</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_11"><head>Fig. 9 .</head><label>9</label><figDesc>Fig. 9. Magnetic readings when putting phone in pant pocket and holding in hand.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_12"><head>Fig. 10 .</head><label>10</label><figDesc>Fig. 10. Heading changes measured by gyroscope. Fig. 11. Fingerprints collection approach (left) and Fingerprint collection APP GUI.</figDesc><graphic coords="9,417.12,43.79,113.30,122.65" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_13"><head>Fig. 12 .</head><label>12</label><figDesc>Fig. 12. Performance of two particle filters with different initial step lengths.</figDesc><graphic coords="10,96.00,43.67,155.90,303.73" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_14"><head>Fig. 13 .</head><label>13</label><figDesc>Fig. 13. Localization results of two particle filters when miscounting occurs.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_15"><head>Fig. 14 .</head><label>14</label><figDesc>Fig. 14. Performance of two particle filters with different initial step lengths.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_17"><head>Fig. 15 .</head><label>15</label><figDesc>Fig. 15. Localization results of two particle filters with heading offset change.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_18"><head>Fig. 16 .</head><label>16</label><figDesc>Fig. 16. The performance of MaLoc using different types of observations.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_19"><head>Fig. 17</head><label>17</label><figDesc>Fig. 17. The changes of particle numbers during localization.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_20"><head></head><label></label><figDesc>Fig. 17. The changes of particle numbers during localization.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_21"><head>Fig. 18 .</head><label>18</label><figDesc>Fig.<ref type="bibr" target="#b17">18</ref>. The execution time of fixed-size particle filter and BIS-particle filter with different maximum particle numbers.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_22"><head>Fig. 19 .</head><label>19</label><figDesc>Fig. 19. The average localization accuracy of BIS and fixed-size sampling with different maximum particle number.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_23"><head>20 .</head><label>20</label><figDesc>Average sample size changes with bin size.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_24"><head>21 .</head><label>21</label><figDesc>Localization accuracy with corresponding bin size and BINS INC THRESHOLD.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_25"><head>Fig. 22 .</head><label>22</label><figDesc>Fig. 22. Different scenes. (a)The hall in floor 1;(b) A conference room;(c)The whole corridor of floor 2. (d) A book shelf area in Library.</figDesc><graphic coords="13,74.40,43.72,127.50,113.24" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_26"><head>Fig. 23 .Fig. 24 .</head><label>2324</label><figDesc>Fig. 23. Performance of MaLoc in different scenes.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_27"><head>Fig. 25 .Fig. 26 .Fig. 27 .</head><label>252627</label><figDesc>Fig. 25. Performance of MaLoc in different conditions and performance comparison with Wi-Fi fingerprinting.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_4"><head></head><label></label><figDesc>10, 50 × 4, 100 × 2, and 200 × 1. The maximum sample size is set to 5000 and BINS INC THRESHOLD is set to 4. From the result shown in Table 1, we observe that a smaller BUNDLE SIZE makes sampling stop in good time. But if BUNDLE SIZE is too small (e.g., 1), it results in a bigger WINDOW SIZE, which may bring more computation overhead as indicated in Algorithm 3 Lines 13-19. According to our experience, setting BUNDLE SIZE to a value between 20 and 100 yields good performance.</figDesc><table /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_5"><head>TABLE 1</head><label>1</label><figDesc></figDesc><table><row><cell></cell><cell>Different Dividing Method</cell></row><row><cell cols="2">Dividing Method Average Sample Size</cell></row><row><cell>10 × 20</cell><cell>828</cell></row><row><cell>20 × 10</cell><cell>837</cell></row><row><cell>50 × 4</cell><cell>887</cell></row><row><cell>100 × 2</cell><cell>931</cell></row><row><cell>200 × 1</cell><cell>1070</cell></row></table></figure>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" xml:id="foot_0"><p>JOURNAL OF L A T E X CLASS FILES, VOL. 13, NO. 9, SEPTEMBER 2014</p></note>
		</body>
		<back>

			<div type="acknowledgement">
<div xmlns="http://www.tei-c.org/ns/1.0"><head>ACKNOWLEDGMENTS</head><p>This work was supported by the NSFC under Grants 61373011, 91318301, 61272456, 61472312, the Foundation for Innovative Research Groups under Grant 61321491.</p></div>
			</div>

			<div type="references">

				<listBibl>

<biblStruct xml:id="b0">
	<analytic>
		<title level="a" type="main">You are facing the mona lisa: spot localization using phy layer information</title>
		<author>
			<persName><forename type="first">S</forename><surname>Sen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Radunovic</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><forename type="middle">R</forename><surname>Choudhury</surname></persName>
		</author>
		<author>
			<persName><forename type="first">T</forename><surname>Minka</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Mobisys</title>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2012">2012</date>
			<biblScope unit="page" from="183" to="196" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b1">
	<analytic>
		<title level="a" type="main">Global indoor self-localization based on the ambient magnetic field</title>
		<author>
			<persName><forename type="first">J</forename><surname>Haverinen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Kemppainen</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Robotics and Autonomous Systems</title>
		<imprint>
			<biblScope unit="volume">57</biblScope>
			<biblScope unit="issue">10</biblScope>
			<biblScope unit="page" from="1028" to="1035" />
			<date type="published" when="2009">2009</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b2">
	<analytic>
		<title level="a" type="main">3-axis magnetic field mapping and fusion for indoor localization</title>
		<author>
			<persName><forename type="first">E</forename></persName>
		</author>
		<author>
			<persName><forename type="first">Le</forename><surname>Grand</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Thrun</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">MFI</title>
		<imprint>
			<biblScope unit="page" from="358" to="364" />
			<date type="published" when="2012">2012</date>
			<publisher>IEEE</publisher>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b3">
	<analytic>
		<title level="a" type="main">Locateme: Magnetic-fields-based indoor localization using smartphones</title>
		<author>
			<persName><forename type="first">K</forename><forename type="middle">P</forename><surname>Subbu</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Gozick</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Dantu</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">TIST</title>
		<imprint>
			<biblScope unit="volume">4</biblScope>
			<biblScope unit="issue">4</biblScope>
			<biblScope unit="page">73</biblScope>
			<date type="published" when="2013">2013</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b4">
	<analytic>
		<title level="a" type="main">Characterization of the indoor magnetic field for applications in localization and mapping</title>
		<author>
			<persName><forename type="first">M</forename><surname>Angermann</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Frassl</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Doniec</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><forename type="middle">J</forename><surname>Julian</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><surname>Robertson</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">IPIN</title>
		<imprint>
			<biblScope unit="page" from="1" to="9" />
			<date type="published" when="2012">2012</date>
			<publisher>IEEE</publisher>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b5">
	<analytic>
		<title level="a" type="main">Indoor location sensing using geo-magnetism</title>
		<author>
			<persName><forename type="first">J</forename><surname>Chung</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Donahoe</forename></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Mobisys</title>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2011">2011</date>
			<biblScope unit="page" from="141" to="154" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b6">
	<monogr>
		<title level="m" type="main">How feasible is the use of magnetic field alone for indoor positioning?&quot; in IPIN</title>
		<author>
			<persName><forename type="first">B</forename><surname>Li</surname></persName>
		</author>
		<author>
			<persName><forename type="first">T</forename><surname>Gallagher</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><forename type="middle">G</forename><surname>Dempster</surname></persName>
		</author>
		<author>
			<persName><forename type="first">C</forename><surname>Rizos</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2012">2012</date>
			<publisher>IEEE</publisher>
			<biblScope unit="page" from="1" to="9" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b7">
	<analytic>
		<title level="a" type="main">Magnetic field navigation in an indoor environment</title>
		<author>
			<persName><forename type="first">W</forename><surname>Storms</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Shockley</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Raquet</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">UPINLBS</title>
		<imprint>
			<biblScope unit="page" from="1" to="10" />
			<date type="published" when="2010">2010</date>
			<publisher>IEEE</publisher>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b8">
	<analytic>
		<title level="a" type="main">Using the magnetic field for indoor localisation on a mobile phone</title>
		<author>
			<persName><forename type="first">A</forename><surname>Bilke</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Sieck</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Location-Based Services</title>
		<imprint>
			<publisher>Springer</publisher>
			<date type="published" when="2013">2013</date>
			<biblScope unit="page" from="195" to="208" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b9">
	<analytic>
		<title level="a" type="main">Monte carlo localization: Efficient position estimation for mobile robots</title>
		<author>
			<persName><forename type="first">D</forename><surname>Fox</surname></persName>
		</author>
		<author>
			<persName><forename type="first">W</forename><surname>Burgard</surname></persName>
		</author>
		<author>
			<persName><forename type="first">F</forename><surname>Dellaert</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Thrun</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">AAAI/IAAI</title>
		<imprint>
			<date type="published" when="1999">1999</date>
			<biblScope unit="page" from="343" to="349" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b10">
	<analytic>
		<title level="a" type="main">Robust monte carlo localization for mobile robots</title>
		<author>
			<persName><forename type="first">S</forename><surname>Thrun</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Fox</surname></persName>
		</author>
		<author>
			<persName><forename type="first">W</forename><surname>Burgard</surname></persName>
		</author>
		<author>
			<persName><forename type="first">F</forename><surname>Dellaert</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Artificial intelligence</title>
		<imprint>
			<biblScope unit="volume">128</biblScope>
			<biblScope unit="issue">1</biblScope>
			<biblScope unit="page" from="99" to="141" />
			<date type="published" when="2001">2001</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b11">
	<monogr>
		<author>
			<persName><forename type="first">S</forename><surname>Thrun</surname></persName>
		</author>
		<author>
			<persName><forename type="first">W</forename><surname>Burgard</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Fox</surname></persName>
		</author>
		<title level="m">Probabilistic robotics</title>
		<imprint>
			<publisher>MIT press</publisher>
			<date type="published" when="2005">2005</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b12">
	<analytic>
		<title level="a" type="main">The active badge location system</title>
		<author>
			<persName><forename type="first">R</forename><surname>Want</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Hopper</surname></persName>
		</author>
		<author>
			<persName><forename type="first">V</forename><surname>Falcao</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Gibbons</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">TOIS</title>
		<imprint>
			<biblScope unit="volume">10</biblScope>
			<biblScope unit="issue">1</biblScope>
			<biblScope unit="page" from="91" to="102" />
			<date type="published" when="1992">1992</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b13">
	<analytic>
		<title level="a" type="main">A new location technique for the active office</title>
		<author>
			<persName><forename type="first">A</forename><surname>Ward</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Jones</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Hopper</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Personal Communications</title>
		<imprint>
			<biblScope unit="volume">4</biblScope>
			<biblScope unit="issue">5</biblScope>
			<biblScope unit="page" from="42" to="47" />
			<date type="published" when="1997">1997</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b14">
	<analytic>
		<title level="a" type="main">Positioning with bluetooth</title>
		<author>
			<persName><forename type="first">J</forename><surname>Hallberg</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Nilsson</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><surname>Synnes</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">ICT</title>
		<imprint>
			<biblScope unit="volume">2</biblScope>
			<biblScope unit="page" from="954" to="958" />
			<date type="published" when="2003">2003</date>
			<publisher>IEEE</publisher>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b15">
	<analytic>
		<title level="a" type="main">Bayesian indoor positioning systems</title>
		<author>
			<persName><forename type="first">D</forename><surname>Madigan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><surname>Einahrawy</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><forename type="middle">P</forename><surname>Martin</surname></persName>
		</author>
		<author>
			<persName><forename type="first">W.-H</forename><surname>Ju</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><surname>Krishnan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Krishnakumar</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">INFOCOM</title>
		<imprint>
			<biblScope unit="volume">2</biblScope>
			<biblScope unit="page" from="1217" to="1227" />
			<date type="published" when="2005">2005</date>
			<publisher>IEEE</publisher>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b16">
	<analytic>
		<title level="a" type="main">Accurate indoor localization with zero start-up cost</title>
		<author>
			<persName><forename type="first">S</forename><surname>Kumar</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Gil</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Katabi</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Rus</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Proceedings of the 20th annual international conference on Mobile computing and networking</title>
		<meeting>the 20th annual international conference on Mobile computing and networking</meeting>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2014">2014</date>
			<biblScope unit="page" from="483" to="494" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b17">
	<analytic>
		<title level="a" type="main">Indoor localization without the pain</title>
		<author>
			<persName><forename type="first">K</forename><surname>Chintalapudi</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><forename type="middle">Padmanabha</forename><surname>Iyer</surname></persName>
		</author>
		<author>
			<persName><forename type="first">V</forename><forename type="middle">N</forename><surname>Padmanabhan</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Mobicom</title>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2010">2010</date>
			<biblScope unit="page" from="173" to="184" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b18">
	<analytic>
		<title level="a" type="main">Radar: An in-building rf-based user location and tracking system</title>
		<author>
			<persName><forename type="first">P</forename><surname>Bahl</surname></persName>
		</author>
		<author>
			<persName><forename type="first">V</forename><forename type="middle">N</forename><surname>Padmanabhan</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">INFOCOM</title>
		<imprint>
			<publisher>IEEE</publisher>
			<date type="published" when="2000">2000</date>
			<biblScope unit="volume">2</biblScope>
			<biblScope unit="page" from="775" to="784" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b19">
	<analytic>
		<title level="a" type="main">The horus wlan location determination system</title>
		<author>
			<persName><forename type="first">M</forename><surname>Youssef</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Agrawala</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Mobisys</title>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2005">2005</date>
			<biblScope unit="page" from="205" to="218" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b20">
	<analytic>
		<title level="a" type="main">Fm-based indoor localization</title>
		<author>
			<persName><forename type="first">Y</forename><surname>Chen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Lymberopoulos</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Liu</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Priyantha</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Mobisys</title>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2012">2012</date>
			<biblScope unit="page" from="169" to="182" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b21">
	<analytic>
		<title level="a" type="main">Gsm indoor localization</title>
		<author>
			<persName><forename type="first">A</forename><surname>Varshavsky</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><surname>De Lara</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Hightower</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Lamarca</surname></persName>
		</author>
		<author>
			<persName><forename type="first">V</forename><surname>Otsason</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Pervasive and Mobile Computing</title>
		<imprint>
			<biblScope unit="volume">3</biblScope>
			<biblScope unit="issue">6</biblScope>
			<biblScope unit="page" from="698" to="720" />
			<date type="published" when="2007">2007</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b22">
	<analytic>
		<title level="a" type="main">Mobile robot localization using an electronic compass for corridor environment</title>
		<author>
			<persName><forename type="first">S</forename><surname>Suksakulchai</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Thongchai</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Wilkes</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><surname>Kawamura</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">SMC</title>
		<imprint>
			<publisher>IEEE</publisher>
			<date type="published" when="2000">2000</date>
			<biblScope unit="volume">5</biblScope>
			<biblScope unit="page" from="3354" to="3359" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b23">
	<analytic>
		<title level="a" type="main">Advanced integration of wifi and inertial navigation systems for indoor mobile positioning</title>
		<author>
			<persName><forename type="first">F</forename><surname>Evennou</surname></persName>
		</author>
		<author>
			<persName><forename type="first">F</forename><surname>Marx</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Eurasip journal on applied signal processing</title>
		<imprint>
			<biblScope unit="page" from="164" to="164" />
			<date type="published" when="2006">2006. 2006</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b24">
	<analytic>
		<title level="a" type="main">Particle filter and smoother for indoor localization</title>
		<author>
			<persName><forename type="first">H</forename><surname>Nurminen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Ristimaki</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Ali-Loytty</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Piché</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Indoor Positioning and Indoor Navigation (IPIN), 2013 International Conference on</title>
		<imprint>
			<publisher>IEEE</publisher>
			<date type="published" when="2013">2013</date>
			<biblScope unit="page" from="1" to="10" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b25">
	<analytic>
		<title level="a" type="main">Wap: Indoor localization and tracking using wifi-assisted particle filter</title>
		<author>
			<persName><forename type="first">F</forename><surname>Hong</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Y</forename><surname>Zhang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Z</forename><surname>Zhang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Wei</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Y</forename><surname>Feng</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Z</forename><surname>Guo</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Local Computer Networks (LCN)</title>
		<imprint>
			<publisher>IEEE</publisher>
			<date type="published" when="2014">2014. 2014</date>
			<biblScope unit="page" from="210" to="217" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b26">
	<analytic>
		<title level="a" type="main">Mawi: a hybrid magnetic and wi-fi system for scalable indoor localization</title>
		<author>
			<persName><forename type="first">C</forename><surname>Zhang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Luo</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Wu</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Proceedings of the 13th international symposium on Information processing in sensor networks</title>
		<meeting>the 13th international symposium on Information processing in sensor networks</meeting>
		<imprint>
			<publisher>IEEE Press</publisher>
			<date type="published" when="2014">2014</date>
			<biblScope unit="page" from="275" to="276" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b27">
	<analytic>
		<title level="a" type="main">A reliable and accurate indoor localization method using phone inertial sensors</title>
		<author>
			<persName><forename type="first">F</forename><surname>Li</surname></persName>
		</author>
		<author>
			<persName><forename type="first">C</forename><surname>Zhao</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><surname>Ding</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Gong</surname></persName>
		</author>
		<author>
			<persName><forename type="first">C</forename><surname>Liu</surname></persName>
		</author>
		<author>
			<persName><forename type="first">F</forename><surname>Zhao</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Ubicomp</title>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2012">2012</date>
			<biblScope unit="page" from="421" to="430" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b28">
	<analytic>
		<title level="a" type="main">Pedestrian localisation for indoor environments</title>
		<author>
			<persName><forename type="first">O</forename><surname>Woodman</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Harle</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Ubicomp</title>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2008">2008</date>
			<biblScope unit="page" from="114" to="123" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b29">
	<analytic>
		<title level="a" type="main">Zee: zero-effort crowdsourcing for indoor localization</title>
		<author>
			<persName><forename type="first">A</forename><surname>Rai</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><forename type="middle">K</forename><surname>Chintalapudi</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Padmanabhan</forename></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Mobicom</title>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2012">2012</date>
			<biblScope unit="page" from="293" to="304" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b30">
	<analytic>
		<title level="a" type="main">Calibrating an ecompass in the presence of hard and soft-iron interference</title>
		<author>
			<persName><forename type="first">T</forename><surname>Ozyagcilar</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Freescale Semiconductor Ltd</title>
		<imprint>
			<date type="published" when="2012">2012</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b31">
	<analytic>
		<title level="a" type="main">Geometric approach to strapdown magnetometer calibration in sensor frame</title>
		<author>
			<persName><forename type="first">J</forename><surname>Vasconcelos</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><surname>Elkaim</surname></persName>
		</author>
		<author>
			<persName><forename type="first">C</forename><surname>Silvestre</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><surname>Oliveira</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Cardeira</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">IEEE Transactions on</title>
		<imprint>
			<biblScope unit="volume">47</biblScope>
			<biblScope unit="issue">2</biblScope>
			<biblScope unit="page" from="1293" to="1306" />
			<date type="published" when="2011">2011</date>
		</imprint>
	</monogr>
	<note>Aerospace and Electronic Systems</note>
</biblStruct>

<biblStruct xml:id="b32">
	<analytic>
		<title level="a" type="main">Complete triaxis magnetometer calibration in the magnetic domain</title>
		<author>
			<persName><forename type="first">M</forename><forename type="middle">H</forename><surname>V. Renaudin</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><surname>Afzal</surname></persName>
		</author>
		<author>
			<persName><surname>Lachapelle</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Journal of sensors</title>
		<imprint>
			<date type="published" when="2010">2010. 2010</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b33">
	<analytic>
		<title level="a" type="main">Calibration of strapdown magnetometers in magnetic field domain</title>
		<author>
			<persName><forename type="first">D</forename><surname>Gebre-Egziabher</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><forename type="middle">H</forename><surname>Elkaim</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><forename type="middle">David</forename><surname>Powell</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><forename type="middle">W</forename><surname>Parkinson</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Journal of Aerospace Engineering</title>
		<imprint>
			<biblScope unit="volume">19</biblScope>
			<biblScope unit="issue">2</biblScope>
			<biblScope unit="page" from="87" to="102" />
			<date type="published" when="2006">2006</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b34">
	<analytic>
		<title level="a" type="main">Monte carlo localization for mobile robots</title>
		<author>
			<persName><forename type="first">F</forename><surname>Dellaert</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Fox</surname></persName>
		</author>
		<author>
			<persName><forename type="first">W</forename><surname>Burgard</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Thrun</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Robotics and Automation</title>
		<imprint>
			<publisher>IEEE</publisher>
			<date type="published" when="1999">1999</date>
			<biblScope unit="volume">2</biblScope>
			<biblScope unit="page" from="1322" to="1328" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b35">
	<analytic>
		<title level="a" type="main">Step counting using smartphone-based accelerometer</title>
		<author>
			<persName><forename type="first">N</forename><forename type="middle">Z</forename><surname>Naqvi</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Kumar</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Chauhan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><surname>Sahni</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">International Journal on Computer Science &amp; Engineering</title>
		<imprint>
			<biblScope unit="volume">4</biblScope>
			<biblScope unit="issue">5</biblScope>
			<date type="published" when="2012">2012</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b36">
	<analytic>
		<title level="a" type="main">Kld-sampling: Adaptive particle filters</title>
		<author>
			<persName><forename type="first">D</forename><surname>Fox</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">NIPS</title>
		<imprint>
			<date type="published" when="2001">2001</date>
			<biblScope unit="page" from="713" to="720" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b37">
	<analytic>
		<title level="a" type="main">Adapting the sample size in particle filters through kld-sampling</title>
	</analytic>
	<monogr>
		<title level="j">The international Journal of robotics research</title>
		<imprint>
			<biblScope unit="volume">22</biblScope>
			<biblScope unit="issue">12</biblScope>
			<biblScope unit="page" from="985" to="1003" />
			<date type="published" when="2003">2003</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b38">
	<analytic>
		<title level="a" type="main">Adapting Mobile Beacon-Assisted Localization in Wireless Sensor Networks</title>
		<author>
			<persName><forename type="first">G</forename><surname>Teng</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><surname>Zheng</surname></persName>
		</author>
		<author>
			<persName><forename type="first">W</forename><surname>Dong</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Sensors</title>
		<imprint>
			<biblScope unit="volume">9</biblScope>
			<biblScope unit="page" from="2760" to="2779" />
			<date type="published" when="2009">2009</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b39">
	<analytic>
		<title level="a" type="main">Markov Localization for Mobile Robots in Dynamic Environments</title>
		<author>
			<persName><forename type="first">D</forename><surname>Fox</surname></persName>
		</author>
		<author>
			<persName><forename type="first">W</forename><surname>Burgard</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Thrun</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Journal of Artificial Intelligence Research</title>
		<imprint>
			<biblScope unit="volume">11</biblScope>
			<biblScope unit="page" from="391" to="427" />
			<date type="published" when="1999">1999</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b40">
	<analytic>
		<title level="a" type="main">Sensor resetting localization for poorly modeled mobile robots</title>
		<author>
			<persName><forename type="first">D</forename><surname>Fox</surname></persName>
		</author>
		<author>
			<persName><forename type="first">W</forename><surname>Burgard</surname></persName>
		</author>
		<author>
			<persName><forename type="first">F</forename><surname>Dellaert</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Thrun</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Proceedings of the IEEE International Conference on Robotics and Automation</title>
		<meeting>the IEEE International Conference on Robotics and Automation</meeting>
		<imprint>
			<date type="published" when="2000">2000</date>
			<biblScope unit="volume">1</biblScope>
			<biblScope unit="page" from="454" to="459" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b41">
	<analytic>
		<title level="a" type="main">Restarting Particle Filters: An Approach to Improve the Performance of Dynamic Indoor Localization</title>
		<author>
			<persName><forename type="first">B</forename><surname>Turgut</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><forename type="middle">P</forename><surname>Martin</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Global Telecommunications Conference</title>
		<imprint>
			<publisher>GLOBECOM . IEEE</publisher>
			<date type="published" when="2009">2009</date>
			<biblScope unit="page" from="1" to="7" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b42">
	<analytic>
		<title level="a" type="main">Magnetic map building for mobile robot localization purpose</title>
		<author>
			<persName><forename type="first">D</forename><surname>Navarro</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><surname>Benet</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">ETFA</title>
		<imprint>
			<biblScope unit="page" from="1" to="4" />
			<date type="published" when="2009">2009</date>
			<publisher>IEEE</publisher>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b43">
	<analytic>
		<title level="a" type="main">Simultaneous localization and mapping using ambient magnetic field</title>
		<author>
			<persName><forename type="first">I</forename><surname>Vallivaara</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Haverinen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Kemppainen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Roning</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">MFI</title>
		<imprint>
			<biblScope unit="page" from="14" to="19" />
			<date type="published" when="2010">2010</date>
			<publisher>IEEE</publisher>
		</imprint>
	</monogr>
</biblStruct>

				</listBibl>
			</div>
		</back>
	</text>
</TEI>
