<?xml version="1.0" encoding="UTF-8"?>
<TEI xml:space="preserve" xmlns="http://www.tei-c.org/ns/1.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.tei-c.org/ns/1.0 https://raw.githubusercontent.com/kermitt2/grobid/master/grobid-home/schemas/xsd/Grobid.xsd"
 xmlns:xlink="http://www.w3.org/1999/xlink">
	<teiHeader xml:lang="en">
		<fileDesc>
			<titleStmt>
				<title level="a" type="main">Nericell: Rich Monitoring of Road and Traffic Conditions using Mobile Smartphones</title>
			</titleStmt>
			<publicationStmt>
				<publisher/>
				<availability status="unknown"><licence/></availability>
			</publicationStmt>
			<sourceDesc>
				<biblStruct>
					<analytic>
						<author>
							<persName><forename type="first">Prashanth</forename><surname>Mohan</surname></persName>
							<email>prmohan@microsoft.com</email>
							<affiliation key="aff0">
								<orgName type="institution">Microsoft Research India</orgName>
								<address>
									<settlement>Bangalore</settlement>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Ramachandran</forename><surname>Ramjee</surname></persName>
							<email>ramjee@microsoft.com</email>
							<affiliation key="aff0">
								<orgName type="institution">Microsoft Research India</orgName>
								<address>
									<settlement>Bangalore</settlement>
								</address>
							</affiliation>
						</author>
						<title level="a" type="main">Nericell: Rich Monitoring of Road and Traffic Conditions using Mobile Smartphones</title>
					</analytic>
					<monogr>
						<imprint>
							<date/>
						</imprint>
					</monogr>
					<idno type="MD5">24FEEF9CCC155AEAED6064C9E5B3B6CB</idno>
				</biblStruct>
			</sourceDesc>
		</fileDesc>
		<encodingDesc>
			<appInfo>
				<application version="0.7.3" ident="GROBID" when="2023-07-28T02:48+0000">
					<desc>GROBID - A machine learning software for extracting information from scholarly documents</desc>
					<ref target="https://github.com/kermitt2/grobid"/>
				</application>
			</appInfo>
		</encodingDesc>
		<profileDesc>
			<textClass>
				<keywords>
					<term>C.m [Computer Systems Organization]: Miscellaneous-Mobile Sensing Systems Algorithms</term>
					<term>Design</term>
					<term>Experimentation</term>
					<term>Measurement Sensing</term>
					<term>Roads</term>
					<term>Traffic</term>
					<term>Mobile Phones</term>
				</keywords>
			</textClass>
			<abstract>
<div xmlns="http://www.tei-c.org/ns/1.0"><p>We consider the problem of monitoring road and traffic conditions in a city. Prior work in this area has required the deployment of dedicated sensors on vehicles and/or on the roadside, or the tracking of mobile phones by service providers. Furthermore, prior work has largely focused on the developed world, with its relatively simple traffic flow patterns. In fact, traffic flow in cities of the developing regions, which comprise much of the world, tends to be much more complex owing to varied road conditions (e.g., potholed roads), chaotic traffic (e.g., a lot of braking and honking), and a heterogeneous mix of vehicles (2-wheelers, 3-wheelers, cars, buses, etc.).</p><p>To monitor road and traffic conditions in such a setting, we present Nericell, a system that performs rich sensing by piggybacking on smartphones that users carry with them in normal course. In this paper, we focus specifically on the sensing component, which uses the accelerometer, microphone, GSM radio, and/or GPS sensors in these phones to detect potholes, bumps, braking, and honking. Nericell addresses several challenges including virtually reorienting the accelerometer on a phone that is at an arbitrary orientation, and performing honk detection and localization in an energy efficient manner. We also touch upon the idea of triggered sensing, where dissimilar sensors are used in tandem to conserve energy. We evaluate the effectiveness of the sensing functions in Nericell based on experiments conducted on the roads of Bangalore, with promising results.</p></div>
			</abstract>
		</profileDesc>
	</teiHeader>
	<text xml:lang="en">
		<body>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="1.">INTRODUCTION</head><p>Roads and vehicular traffic are a key part of the day-today lives of people. Therefore, monitoring their conditions has received a significant amount of attention. Prior work in this area has primarily focused on the developed world, where good roads and orderly traffic mean that the traffic conditions on a stretch of road can largely be characterized by the volume and speed of traffic flowing through it. To monitor this information, intelligent transportation systems (ITS) <ref type="bibr" target="#b7">[9]</ref> have been developed. Many of these involve deploying dedicated sensors in vehicles (e.g., GPS-based tracking units <ref type="bibr" target="#b10">[12]</ref>) and/or on roads (inductive loop vehicle detectors, traffic cameras, doppler radar, etc.), which can be an expensive proposition and so is typically restricted to the busiest stretches of road. See <ref type="bibr" target="#b1">[3]</ref> for a good overview of traffic surveillance technologies and Section 2 for related work.</p><p>In contrast, road and traffic conditions in the developing world tend to be more varied because of various socioeconomic reasons. Road quality tends to be variable, with bumpy roads and potholes being commonplace even in the heart of cities. The flow of traffic can be chaotic, with little or no adherence to right of way protocols at some intersections and liberal use of honking (The Nericell project webpage <ref type="bibr" target="#b9">[11]</ref> includes a video clip of a chaotic intersection in Bangalore). Vehicles types are also very heterogeneous, ranging from 2-wheelers (e.g., scooters and motorbikes) and 3-wheelers (e.g., autorickshaws) to 4-wheelers (e.g., cars) and larger vehicles (e.g., buses).</p><p>Monitoring such varied road and traffic conditions is challenging, but it holds the promise of enabling new and useful functionality. For instance, information gathered via rich sensing could be used to annotate a map, thereby allowing a user to search for driving directions that would minimize stress by avoiding chaotic roads and intersections.</p><p>To address this challenge, we present Nericell 1 , a system for rich monitoring of road and traffic conditions that piggybacks on mobile smartphones. Nericell orchestrates the smartphones to perform sensing and report data back to a server for aggregation. Indeed, smartphones include a range of sensing and communication capabilities, in addition to computing. A phone might include any or all of a microphone, camera, GPS, and accelerometer, each of which could be used for traffic sensing functions. In addition, the phone would include a cellular radio (e.g., GSM), possibly with data communication capabilities (e.g., GPRS or UMTS).</p><p>A mobile phone-based approach to traffic monitoring is a good match for developing regions because it avoids the need for expensive and specialized traffic monitoring infrastructure. It also avoids dependence on advanced vehicle features such the Controller Area Network (CAN) bus that are absent in the many low-cost vehicles that are commonplace in developing regions (e.g., the 3-wheeled autorickshaws in India). Moreover, it takes advantage of the booming growth of mobile telephony in such regions. For example, as of mid-2008, India had 287 million mobile telephony subscribers, growing at an estimated 7 million each month <ref type="bibr">[15,</ref><ref type="bibr" target="#b5">7]</ref>. Although the majority of users have basic mobile phones today, a large number of them, in fact more than the number of PC Internet users in India, access the internet on their phones <ref type="bibr" target="#b8">[10]</ref>, suggesting that the prospects of greater penetration of more capable phones are good. There are similar growth trends in many other parts of the world, with the total number of mobile subscriptions worldwide estimated at 3.3 billion <ref type="bibr" target="#b3">[5]</ref>. Note that despite being mobile phone-based, our approach to traffic monitoring is distinct from prior work based on remote tracking of mobile phones by cellular operators <ref type="bibr" target="#b36">[39,</ref><ref type="bibr" target="#b0">2,</ref><ref type="bibr">1]</ref>. Our sensing and inferences goes beyond just monitoring location and speed information, hence requiring a presence on the phones themselves.</p><p>Our focus in this paper is on the sensing component of Nericell; we defer a discussion of the larger system, including the aggregation server, to future work. Several technical challenges arise from our design choice to perform rich sensing and base the system on mobile smartphones. Nericell leverages sensors besides GPS -accelerometer and microphone, in particular -to glean rich information, e.g., the quality of the road or the noisiness of traffic. The use of an accelerometer introduces the challenge of virtually reorienting it to compensate for the arbitrary orientation of the phone that it is embedded in. Furthermore, we need to design efficient and robust bump, brake and honk detectors in order to infer road and traffic conditions.</p><p>Moreover, since a smartphone is battery powered and is primarily someone's phone, energy-efficiency is a key consideration in Nericell. To this end, we employ the concept of triggered sensing, wherein a sensor that is relatively inexpensive from an energy viewpoint (e.g., cellular radio or accelerometer) is used to trigger the operation of a more expensive sensor (e.g., GPS or microphone). For efficiency in communication and energy usage, each node processes the sensed data locally before shipping the processed data back to the server.</p><p>The main contributions of this work are: (1) algorithms to virtually reorient a disoriented accelerometer along a canonical set of axes and then use simple threshold-based heuristics to detect bumps and potholes, and braking (Section 5); <ref type="bibr" target="#b0">(2)</ref> heuristics to identify honking by using audio samples sensed via the microphone (Section 6); (3) evaluation of the use of cellular tower information in dense deployments in developing countries to perform energy-efficient localization (Section 7); and (4) triggered sensing techniques, wherein a lowenergy sensor is used to trigger the operation of a highenergy sensor (Section 8). Finally, we have implemented most of these techniques on smartphones running Windows Mobile 5.0 (Section 9).</p><p>There are two important issues that we do not address in this paper. One is the question of privacy of the users whose phones participate in Nericell. It may be possible to achieve good enough privacy simply by suppressing the identity of a participating phone (e.g., its phone number) when reporting and aggregating the sensed data. A more sophisticated privacy-aware community sensing approach that incorporates formal models of sharing preferences is presented in <ref type="bibr" target="#b29">[32,</ref><ref type="bibr" target="#b24">27]</ref>. The second issue is of providing incentives for participation in Nericell. Providing incentives for participation in such decentralized systems is an active area of research (e.g., <ref type="bibr" target="#b14">[17]</ref>) and we may be able to leverage this for Nericell.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.">RELATED WORK</head><p>Intelligent transportation systems <ref type="bibr" target="#b7">[9]</ref> have been proposed and built to leverage computing and communication technology for various purposes: traffic management, routing planning, safety of vehicles and roadways, emergency services, etc. We focus here on work that is most relevant to Nericell.</p><p>There has been much work on systems for traffic monitoring, both in the research world and in the commercial space. Many of these systems leverage vehicle-based GPS units (e.g., as in GM's OnStar <ref type="bibr" target="#b10">[12]</ref>) that track the movement of vehicles and report this information back to a server for aggregation and analysis. For instance, CarTel <ref type="bibr" target="#b26">[29]</ref> includes a special box installed in vehicles to monitor their movements using GPS and report it back using opportunistic communication across a range of radios (WiFi, Bluetooth, cellular). This information is then used for applications such as route planning.</p><p>Recent work on Surface Street Traffic Estimation <ref type="bibr" target="#b39">[42]</ref> also uses GPS-derived location traces but goes beyond just estimating speed to identifying anomalous traffic situations using both the temporal and spatial distributions of speed. For instance, the authors are able to distinguish between traffic congestion and vehicles halting at a traffic signal.</p><p>Operational services, both commercial and otherwise, have been built using GPS information as well as information from other traffic sensors deployed in an area (inductive loop vehicle detectors, traffic cameras, doppler radar, etc.). Examples include the Washington State SmartTrek system in the U.S. <ref type="bibr" target="#b19">[22]</ref> (which includes, among other things, the Busview service <ref type="bibr" target="#b11">[13]</ref>, to track the city buses in the Seattle area), and the INRIX system <ref type="bibr" target="#b6">[8]</ref> for predicting traffic based on historical data.</p><p>There has also been work on leveraging mobile phones carried by users as traffic probes. Smith et al. <ref type="bibr" target="#b36">[39]</ref> report on a trial conducted in Virginia in 2000, which was based on localizing mobile phones using information gathered at the cellular towers. This study made a number of interesting observations, including that the sample density (at the place and time of this study) was only sufficient for estimating speed with moderate accuracy (within 10 mph = 16 kmph), and that there was a tendency to underestimate speed because of samples from stationary phones located near the roadway. Regardless, the rapid growth in mobile phone penetration has spurred the deployment of similar systems in other locations worldwide, including in Bangalore <ref type="bibr" target="#b0">[2]</ref>.</p><p>Much of the work on ITS has used GPS-based localization and some of it has used localization performed at cell towers.</p><p>However, there has been separate work on enabling a mobile phone to locate itself, whether based on GSM signals <ref type="bibr" target="#b37">[40,</ref><ref type="bibr" target="#b17">20]</ref>, with a median accuracy under 100m in the outdoors measured in the Seattle area, or based on WiFi <ref type="bibr" target="#b18">[21]</ref>, with a median accuracy of 13-40m in an area with dense WiFi coverage. It is possible to use these localization techniques in the context of an ITS, either to complement GPS or as an alternative.</p><p>Other forms of sensing, besides localization, have also been employed in ITS systems. Accelerometers are used for automotive safety applications such as detecting crashes to deploy airbags and to possibly also notify emergency services automatically (e.g., Veridian <ref type="bibr" target="#b27">[30]</ref>). Accelerometers and strain gauges coupled with cameras have been used for structural monitoring of the transportation infrastructure <ref type="bibr" target="#b16">[19]</ref>. In recent work, the Pothole Patrol (P 2 ) system <ref type="bibr" target="#b21">[24]</ref> performs road surface monitoring by using special-purpose devices with 3-axis accelerometers and GPS sensors mounted on the dashboard of cars. It tackles the challenging problem of not only identifying potholes but also differentiating potholes from other road anomalies. The use of a special-purpose device mounted in a known orientation, which simplifies the analysis, is a key distinction of P 2 compared to our work on Nericell, which leverages smartphones that users happen to carry with them.</p><p>To put it in context, our work on Nericell builds on prior work but is distinct from it in several ways. We do not replicate the significant body of prior work on estimating the speed of traffic flow <ref type="bibr" target="#b36">[39,</ref><ref type="bibr" target="#b39">42]</ref> and driving patterns <ref type="bibr" target="#b30">[33]</ref> based on location traces, and presenting this information to users in an appropriate form <ref type="bibr" target="#b31">[34]</ref>. Instead, Nericell focuses on novel aspects of sensing varied road and traffic conditions, such as bumpy roads and noisy traffic. Furthermore, Nericell uses smartphones that users happen to carry with them, depending only on capabilities that are already available in some phones and that are likely to be available in many more in the coming years. By piggybacking on an existing platform, Nericell avoids the need for specialized and potentially expensive monitoring equipment to be installed, whether on vehicles as in <ref type="bibr" target="#b21">[24,</ref><ref type="bibr" target="#b26">29]</ref> or as part of the infrastructure as in SmartTrek <ref type="bibr" target="#b19">[22]</ref>. But building on top of a mobile phone platform introduces challenges, for instance, with regard to accelerometer orientation, energy efficiency and device localization, which we address in Nericell. Finally, Nericell falls under the active area of research called opportunistic or participatory sensing <ref type="bibr" target="#b13">[16]</ref> and can leverage ongoing research on challenges that are inherent to this area, e.g., data credibility and privacy.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.">EXPERIMENTAL SETUP</head><p>We discuss the hardware and software setup used for our work and the measurement data that we gathered.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.1">Smartphone Capabilities</head><p>A smartphone may include any or all of the following capabilities of relevance to Nericell:</p><p>• Computing: CPU, operating system, and storage that provides a programmable computing platform.</p><p>• Communication:</p><p>-Cellular: radio for basic cellular voice communication (e.g., GSM), available in all phones.</p><p>-Cellular data: e.g., GPRS, EDGE, UMTS, provided by the cellular radio.</p><p>-Local-area wireless: radios for local-area wireless communication (e.g., Bluetooth, WiFi).</p><p>• Sensing:</p><p>-Audio: microphone.</p><p>-Localization: GPS receiver.</p><p>-Motion: accelerometer, sometimes included for functions such as gesture recognition.</p><p>-Visual: camera, although Nericell does not make use of this at present. These capabilities are not only within the realm of engineering possibility, but in fact there exist smartphones on the market that include most or all of the above capabilities in a single package. For example, the Nokia N95 includes all whereas the HP iPAQ hw6965 includes all except an accelerometer and the Apple iPhone includes all except GPS. We emphasize, however, that Nericell does not require all participating phones to include each of these capabilities.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.2">Hardware and Software Setup</head><p>Despite the availability of such capable smartphones, our experimental setup is complicated a little by hardware and software constraints of the devices available to us. We describe here the devices that we use.</p><p>• HP iPAQ hw6965 <ref type="bibr" target="#b4">[6]</ref>: This Pocket PC running Windows Mobile 5.0 includes a GSM/GPRS/EDGE radio, Bluetooth 1.2, 802.11b, and a Global Locate GPS receiver.</p><p>• HTC Typhoon: For cellular localization, we use rebranded HTC Typhoon phones, specifically the Audiovox SMT5600, iMate SP3, and Krome iQ700, which feature a tri-band GSM radio and run Windows Mobile 2003. As noted in <ref type="bibr" target="#b34">[37,</ref><ref type="bibr" target="#b17">20]</ref> the HTC Typhoon is convenient to use for this purpose because it makes available information about multiple cell towers in the vicinity. All phones (including our HP iPAQs) have this tower information (which is needed to perform handoffs) but do not expose it to user-level software, although there is no fundamental reason why they could not.</p><p>• Sparkfun WiTilt accelerometer <ref type="bibr" target="#b12">[14]</ref>: The Sparkfun WiTilt combines a Freescale MMA7260Q <ref type="bibr" target="#b2">[4]</ref> 3-axis accelerometer sensor with a Bluetooth radio to enable remote reading. The Freescale MMA7260Q accelerometer sensor has a selectable sensitivity ranging from +/-1.5g to +/-6g and a sampling frequency of up to 610 Hz.</p><p>While the HP iPAQ is the centerpiece of our setup, we use the WiTilt as the accelerometer sensor and use the Typhoon for cellular localization.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.3">Trace Collection</head><p>Much of our experimental work was set in Bangalore. We gathered GPS-tagged cellular tower measurements during several drives over the course of 4 weeks. Separately, we gathered GPS-tagged accelerometer data measurements on drives on some of the same routes over the course of 6   A typical chaotic road intersection with variety of vehicles at loggerheads days. <ref type="foot" target="#foot_1">2</ref> We also gathered cellular tower measurements over the course of a few days in the Seattle area. Table <ref type="table" target="#tab_0">1</ref> summarizes all of the data that we gathered on drives through traffic. Figure <ref type="figure" target="#fig_0">1</ref> shows a map of Bangalore with the drive routes highlighted.</p><p>In addition to drive data, we gathered accelerometer data over specific sections of road (selected for their bumps, potholes, etc.) at controlled speeds using a Toyota Qualis multiutility vehicle. The vehicles were driven by various drivers with the accelerometer placed in various locations -back and middle seats, dashboard and the hand rest of the vehicle. We also recorded the sound of several vehicles honking.</p><p>Figure <ref type="figure" target="#fig_1">2</ref> shows a typical chaotic intersection with different vehicle types, each approaching the intersection from a different direction and with little adherence to right of way protocols. These intersections are typically also characterized by significant amount of braking and honking. A video clip of such a chaotic intersection in Bangalore, showing a lot of braking and honking, is available at <ref type="bibr" target="#b9">[11]</ref>.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.">OVERVIEW</head><p>The richness of sensing that Nericell encompasses is motivated by the wide applicability we envisage for the system. The system could be used to annotate traditional traffic maps with information such as the bumpiness of roads, and the noisiness and level of chaos in traffic, for the benefit of the traffic police, the road works department, and ordinary users. For instance, a user might search for a route that minimizes the number of chaotic intersections to be traversed, thereby optimizing for "blood pressure" rather than for distance or time. While these applications serve as the motivation, our focus in this paper is on the sensing component of Nericell, specifically, on how to efficiently use the accelerometer, microphone, GSM, and GPS sensors in mobile Table <ref type="table">2</ref>: Power usage for various activities smartphones to detect bumps and potholes, braking, and honking, and to determine location in an energy-efficient manner.</p><p>In Section 5, we focus on sensing using a 3-axis accelerometer. Given that a mobile smartphone and its embedded accelerometer could be in any arbitrary orientation, we first discuss our algorithm for virtually reorienting a disoriented accelerometer automatically. Using real drive data from reoriented as well as well-oriented accelerometers, we evaluate the efficacy of our reorientation algorithm as well as our simple heuristics to detect bumps and potholes, and braking. In Section 6, we describe how audio sensed using the microphone can be used to detect honks. In Section 7, we discuss and evaluate the accuracy of energy-efficient coarsegrain localization and traffic speed estimation using GSM cellular tower information.</p><p>Given the energy costs of the different sensors, as indicated in Table <ref type="table">2</ref>, Nericell only keeps its GSM radio (which has to be turned on anyway for the phone to function) and the accelerometer turned on continually. It uses input from these two devices to trigger the turning on of the other sensors, for instance, to obtain a precise location fix using GPS. We discuss this and other examples of triggered sensing in Section 8.</p><p>Note that each individual phone filters and processes its sensed data locally before reporting it to a server for aggregation. This not only cuts down on the cost of communication (including the energy cost entailed), it helps with privacy (for example, by not uploading raw audio feeds) and it also cuts down on the volume of extraneous data, not reflective of road and traffic conditions, that the aggregator has to contend with. For example, we filter out accelerometer readings arising from a user fidgeting with their phone rather than from bumps in the road.</p><p>Finally, we present our implementation status in Section 9 with the focus again on mobile phone-based sensing. Given the small scale of our experiments and testbed thus far, we have only developed a rudimentary server that simply aggregates processed data from the phones. In a large-scale system, the server would need algorithms to disambiguate and cluster data from the various phones, for example, as presented in <ref type="bibr" target="#b21">[24]</ref>. The server would also need to orchestrate the phones to perform sensing in a manner that minimizes overall resource usage, for example, using an approach such as in <ref type="bibr" target="#b29">[32]</ref>.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.">ACCELERATION</head><p>In this section, we discuss how Nericell uses the accelerometer on a phone to sense road and traffic conditions.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.1">Framework</head><p>As noted in Section 3.2, we use a 3-axis accelerometer for our work. The accelerometer has a 3-dimensional Cartesian frame of reference with respect to itself, represented by the orthogonal x, y, and z axes. In addition, we define a Cartesian frame of reference with respect to the vehicle that the accelerometer (or rather the phone that it is part of) is in. The vehicle's frame of reference is represented by the orthogonal X, Y , and Z axes, with X pointing directly to the front, Y to the right, and Z into the ground. See Figure <ref type="figure" target="#fig_2">3</ref> for an illustration.</p><p>Note the distinction between the lower case letters (x, y, z) used to represent the accelerometer's frame of reference and the upper case letters (X, Y , Z) used to represent the vehicle's frame of reference. If (x, y, z) is aligned with (X, Y , Z), we say that the accelerometer is well-oriented. Otherwise, we say that it is disoriented.</p><p>The accelerometer readings along the 3 axes are denoted by ax, ay, and az. If the accelerometer is well-oriented, these readings would also correspond to aX , aY , and aZ along the vehicle's axes. All acceleration values are expressed in terms of g, the acceleration due to gravity (9.8 m/s 2 ). Also, we set the sampling frequency of the accelerometer to 310 Hz, unless noted otherwise.</p><p>Finally, we note that ours is a DC accelerometer, which means that it is capable of measuring "static" acceleration. For instance, even when a well-oriented accelerometer is stationary, it reports az = 1g. In essence, the measurement reported by the accelerometer is a function of the force exerted on its sensor mechanism, not the textbook definition of acceleration as the rate of change of velocity. For the same reason, when the vehicle accelerates (which would represent a positive acceleration along X according to the textbook definition), our accelerometer would experience a force pressing it backwards and hence report a negative acceleration along X.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.2">Determining Accelerometer Orientation</head><p>In general, the phone (or, rather, the accelerometer embedded in it) and its (x,y,z) axes could be in an arbitrary orientation with respect to the vehicle and its (X,Y ,Z) axes. Furthermore, this orientation could change over time as the phone is moved around. A phone that is disoriented in this manner makes it non-trivial for its accelerometer measurements to be used to infer road and traffic conditions. For instance, if z were aligned with X (i.e., it points to the front rather than down), episodes of sharp acceleration and deceleration (i.e., horizontal acceleration) might be mistaken for bumps on the road (i.e., vertical acceleration). Thus, before the accelerometer measurements can be used, it is important for us to virtually reorient the accelerometer to compensate for its disorientation. The need to address this challenge is a key distinction of our approach based on phones from the prior work on Pothole Patrol <ref type="bibr" target="#b21">[24]</ref> that leverages a dedicated accelerometer mounted at a known orientation.</p><p>We define the canonical orientation of (x,y,z) to be the one that corresponds to (X,Y ,Z). In general, any arbitrary orientation of (x,y,z) can be arrived at by applying rotations about X, Y , and Z in sequence, starting with the canonical orientation. Our goal is to infer the angles of rotation about each axis. While we could work with such a framework, it yields multi-factor trigonometric equations that are complex to solve.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.2.1">Euler Angles</head><p>An alternative but equivalent framework is based on Euler angles <ref type="bibr" target="#b23">[26,</ref><ref type="bibr" target="#b38">41]</ref>, which, as it turns out, simplifies our calculations significantly. There are a number of formulations of Euler angles, but we only describe the formulation (termed Z -Y -Z) that we use in our work. Any orientation of the accelerometer can be represented by a pre-rotation of φpre about Z, followed by a tilt of θ tilt about Y , and then a post-rotation of ψpost again about Z. All angles are measured counter-clockwise about the corresponding axis. (The subscripts to φpre, θ tilt , and ψpost are not needed, but we include these for clarity.) That these three Euler angles are sufficient to represent any orientation might seem counter-intuitive since there is no rotation about X and thus one might erroneously conclude that the tilt has no impact on y. However, because of the pre-rotation, the tilt would in fact affect both x and y in general. For example, if the pre-rotation were by 90 o , y would be in line with X, so the tilt about Y would in fact impact y.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.2.2">Estimating Pre-rotation and Tilt</head><p>With this framework in place, we now describe our procedure for determining the orientation of the disoriented accelerometer. When the accelerometer is stationary or in steady motion, the only acceleration it will experience is that due to gravity, along Z. (Recall that our accelerometers report the strength of the force field, so aZ = 1g despite the accelerometer being stationary.) The tilt operation is the only one that changes the orientation of z with respect to Z. So az = aZcos(θ tilt ). Since aZ = 1, we have</p><formula xml:id="formula_0">θ tilt = cos -1 (az)<label>(1)</label></formula><p>Pre-rotation followed by tilt would also result in non-zero ax and ay due to the effect of gravity. As explained in Appendix A, we have:</p><formula xml:id="formula_1">φpre = tan -1 ( ay ax )<label>(2)</label></formula><p>To estimate θ tilt and φpre using Equations 1 and 2, we could identify periods when the phone is stationary (e.g., at a traffic light) or in steady motion in a straight line, say using GPS to track motion. However, a simpler approach that we have found works well in practice is to just use the median values of ax, ay, and az over a 10-second window. <ref type="foot" target="#foot_2">3</ref> The median value over a window of this length turns out to be remarkably stable, even during a bumpy drive. Intuitively, any spike in acceleration would tend to be momentary and would settle back around the median within a few seconds or less. For example, if the vehicle gets lifted up by a bump, thereby causing a spike in the g-force, it would descend back soon enough, causing a spike in the reverse direction; the median itself remains largely unaffected.</p><p>Thus by computing ax, ay, and az over short time windows, we are able to estimate θ tilt and φpre on an ongoing basis. Any significant change in θ tilt and φpre would indicate a significant change in the phone's orientation. However, the converse is not always true. If the phone were carefully rotated about Z, θ tilt and φpre would remain unaffected. </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.2.3">Estimating Post-rotation</head><p>Since post-rotation (like pre-rotation) is about Z, it has no impact with respect to the gravitational force field, which runs parallel to Z. So we need a different force field with a known orientation that is not parallel to Z, to be able to estimate the angle of post-rotation, ψpost. In practice, we would need this force field to have a significant component in a known direction orthogonal to Z.</p><p>The acceleration and braking of a vehicle travelling in a straight line produces a force field in a known direction, X, in line with the direction of motion of the vehicle. However, these would have little impact on the orthogonal directions, in particular, on Y . In general, braking tends to be sharper than acceleration, so we focus our attention on braking. For example, if a car travelling at 50 kmph ≈ 31 mph brakes to a halt in 10 seconds, aX would be be about 0.14g, a small but still noticeable level.</p><p>We use GPS to monitor the vehicle's motion and thereby identify periods of sharp deceleration but without a significant curve in the path (i.e., the GPS track is roughly linear). During such a period, we know that there will be a noticeable, even if transient, force field along X, with little impact on Y . Given the measured accelerations (ax, ay, az), and the angles of pre-rotation (φpre) and tilt (θ tilt ), we estimate the angle of post-rotation (ψpost) as the one that maximizes our estimate, a ′ X , of the acceleration along X, which is the direction of braking. Note that a ′ X is an estimate and hence is not necessarily equal to the true aX.</p><p>As explained in Appendix B, this maximization procedure yields:</p><formula xml:id="formula_2">ψpost = tan -1<label>(3)</label></formula><p>( -axsin(φpre)+aycos(φpre)</p><p>(axcos(φpre)+aysin(φpre))cos(θ tilt )-azsin(θ tilt ) ) To estimate ψpost, we first estimate φpre and θ tilt using Equations 1 and 2. We then identify an instance of sharp deceleration using GPS data and record the mean ax, ay, and az during this period. In our experiments, we use just the first few seconds (typically 2 seconds) of the deceleration to compensate for the time lag in the speed estimate obtained from GPS. Note that we use the mean here, unlike the median used in Section 5.2.2, because we want to record the transient surge because of the sharp deceleration.</p><p>Compared to estimating φpre and θ tilt , estimating ψpost is more elaborate and expensive, requiring GPS to be turned on. So we monitor φpre and θ tilt on an ongoing basis, and only if there is a significant change in these or there is other evidence that the phone's orientation may have changed (Section 5.3), do we turn on GPS and run through the process of estimating ψpost afresh.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.2.4">Validating Virtual Reorientation</head><p>To validate the virtual reorientation algorithm described above, we conduct an experiment that involves measurements made with three accelerometers: ACL-1 and ACL-2, which are well-oriented, and ACL-3, which is disoriented. We make these measurements during a drive, which includes episodes of acceleration and braking, and use these to estimate φpre, θ tilt , and ψpost for ACL-3, using Equations 1, 2, and 3, respectively. Using these estimates and the measured ax, ay, and az for ACL-3, we estimate a ′ X , a ′ Y , and a ′ Z . We then compare these estimates with the measured values of aX , aY , and aZ from the well-oriented accelerometers, ACL-1 and ACL-2. A good match would suggest that the estimates of φpre, θ tilt , and ψpost are accurate.</p><p>As an illustration, Figure <ref type="figure" target="#fig_4">4</ref> shows to a sharp deceleration during the period of 27-30 seconds, which generates a surge in aX alone, as recorded by ACL-1, one of the two well-oriented accelerometers (Figure <ref type="figure" target="#fig_4">4(b)</ref>). The disoriented accelerometer, ACL-3, on the other hand, records surges or dips in its ax, ay, and az (Figure <ref type="figure" target="#fig_4">4(c)</ref>). However, after ACL-3's orientation is estimated and compensated for, a To quantify the effectiveness of virtual reorientation, we compute the cross-correlation between the measurements from the reoriented accelerometer and those from the welloriented accelerometers. The cross-correlation between two time series, x[i] and y[i], is defined as:</p><formula xml:id="formula_3">r = P N i=0 {(x[i] -x) * (y[i] -ȳ)} q P N i=0 (x[i] -x) 2 * q P N i=0 (y[i] -ȳ) 2</formula><p>x and ȳ correspond to the means of the two time series. When the two time series are perfectly correlated, r = 1. When they are entirely uncorrelated, r = 0.</p><p>As is clear from Figure <ref type="figure" target="#fig_4">4</ref>, measurements from an accelerometer are noisy, presumably because of artifacts of its analog sensor mechanism. This has a two implications for our evaluation. First, the cross-correlation between measurements from two accelerometers is low during periods when the measurements only comprise (uncorrelated) noise, with little or no signal. However, since our interest is in periods when there is a signal, say due to braking or a bump, we only consider the measurements during such periods of activity in our computation of cross-correlation. In the experiment we conducted, this would correspond to the X component during the episodes of acceleration and braking. Second, the presence of noise even during such periods of interest means that two accelerometers may not agree perfectly, even if they are both well-oriented. So, in addition to reporting the cross-correlation between the virtually reoriented accelerometer (ACL-3) and each of the well-oriented ones (ACL-1 and ACL-2), we also report the cross-correlation between the two well-oriented accelerometers (ACL-1 and ACL-2) to provide a point of comparison. Table <ref type="table">3</ref> shows the cross-correlation numbers between each pair of accelerometers across several episodes of acceleration and braking. Each episode lasted 15-20 seconds and the accelerometer sampling frequency was set to 25 Hz, yielding a time series comprising 375-450 samples. The accelerometers were placed on the rear seat of a Toyota Qualis vehicle. The orientation of ACL-3 was held fixed across certain pairs of Table <ref type="table">3</ref>: Cross-correlation between the X components of the disoriented accelerometer (ACL-3) and each of the well-oriented accelerometers (ACL-1 and ACL-2) across several episodes of acceleration and braking. We report the cross-correlation numbers for before (D-W ) and after (R-W ) virtual reorientation is performed, along with the reorientation angles. We also report the W -W cross-correlation numbers between the two well-oriented accelerometers, to provide a point of comparison.</p><formula xml:id="formula_4">W 1 -W 2 φpre/θ tilt /ψ post D 3 -W 1 R 3 -W 1 D 3 -W 2 R 3 -</formula><p>episodes and was changed between others. We observe that, in general, the the cross-correlation improves significantly when we go from having a disoriented accelerometer to one that has been virtually reoriented. For example, in episode 1, the cross-correlation between ACL-3 and ACL-1 improves from 0.30 to 0.88 after virtual reorientation is performed. In some cases, the improvement is smaller, for example, going from 0.62 to 0.71 in episode 5. The reason for the smaller improvement in episode 5 is that the angles of pre-rotation (φpre) and post-rotation (ψpost) are small (3 o and -1 o , respectively). So even with disorientation, braking causes a surge in ax, albeit reduced in magnitude because of the tilt, θ tilt . We also observe that the cross-correlation numbers after virtual reorientation (the R-W columns) are comparable to those between the two well-oriented accelerometers (the W -W column). Furthermore, these cross-correlation numbers, while high, are significantly lower than the cross-correlation of 1.0 that perfect correlation would yield. The lack of perfection comes from noise spikes, which motivates our insistence in Section 5.4.3 and Section 5.4.1 on looking for sustained surges rather than momentary spikes to detect bumps and braking, unless the spikes are much larger in magnitude than those due to noise.</p><p>To conclude, our results in this section suggest that with virtual reorientation, a disoriented accelerometer has the potential to be almost as effective as a well-oriented accelerometer for the purpose of monitoring road and traffic conditions.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.3">Detecting User Interaction</head><p>When a phone is being interacted with by the user, it would experience extraneous accelerations. Thus, we would like to neglect the accelerometer readings such periods. We use two techniques to detect user interaction. To detect orientation changes, we use the technique described in Section 5.2.2, with the caveat noted there. To detect other forms of user interaction, we look for one or more of the following: key presses on the phone's keypad, mouse movements and ongoing or recently concluded phone calls.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.4">Inferring Road and Traffic Conditions</head><p>We now present analyses of accelerometer measurements for detecting brakes and potholes in the road.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.4.1">Braking Detection</head><p>We first consider the problem of detecting braking events. The frequency of braking on a section of road is indica-tive of drive quality. A high incidence of braking could be because of poor road conditions (e.g., poor lighting) that make drivers tentative or because of heavy and chaotic traffic. While GPS could be used to detect braking, doing so would incur a high energy cost, as indicated in Table <ref type="table">2</ref>. Furthermore, GPS-based braking detection is challenging at low speeds because of the GPS localization error of 3-6 m. So in Nericell, we focus on an alternative approach, namely, leveraging the accelerometer in a phone for braking detection.</p><p>In general, braking would cause a surge in aX because the accelerometer would experience a force pushing it to the front. The surge can be significant even when the brake is applied at low speed. If a vehicle travelling at 10 kmph brakes to a halt in 1 second, that would result in an average surge of 0.28g in aX and possibly much larger spikes. Figure <ref type="figure" target="#fig_4">4</ref>(b) and (d) clearly show a sustained surge in aX corresponding to a braking event.</p><p>The persistence of the surge over relatively long timeframes (a second or longer) makes brake detection an easier problem than detecting potholes where the signal lasts only fractions of a second (see Section 5.4.3). To detect the incidence of braking, we compute the mean of aX over a sliding window N seconds wide. If the mean exceeds a threshold T , we declare that as a braking event.</p><p>In order to evaluate our braking detector, we need to establish the ground truth. Ideally, we would have liked to use data from the car's CAN bus for obtaining accurate information on the ground truth, but we did not have access to it. So for the evaluation presented in this section, we use GPS-based braking detection to establish the ground truth. To minimize the impact of GPS's localization error noted above, we employ a conservative approach that only considers sustained braking events that last several seconds. (See Section 5.4.2 for an evaluation of the same brake detector on sharp brakes at slow speeds with manually established ground truth.) Using a trace of GPS location estimates, say ...loci-1, loci, loci+1, ..., we compute instantaneous speed at time i as distance(loci-1, loci+1)/2. Once we have the instantaneous speed values, we define a brake as deceleration of at least 1m/s 2 sustained over at least 4 seconds (i.e., a decrease in speed of at least 14.4 kmph over 4 seconds).</p><p>We use a 75-minute long drive over 35 km of varied traffic conditions to evaluate our braking detection heuristic. Using the GPS-derived ground truth described above, we detect a total of 45 braking events in this trace. This drive also includes data from two accelerometers, one well-oriented (ACL-1) and the other disoriented (ACL-3). The virtual reorientation procedure from Section 5.2 was applied to measurements from ACL-3, before it was fed into our braking detection heuristic. We set the parameters of the braking detection heuristic to correspond to the definition of a brake. We compute the mean of X-values over a N = 4 second window and depict results for threshold values of T=0.11g and T=0.12g (i.e., 10-20% more conservative than the 1m/s 2 deceleration threshold applied on the GPS trace to establish the ground truth).</p><p>The results of applying our braking detection heuristic are shown in Table <ref type="table" target="#tab_4">4</ref>. The percentage of false positives/negatives and also the magnitude of the change in speed during the false positive/negative events are shown. The first observation is that the results using accelerometer ACL-1 agree quite well with the results using the reoriented accelerometer ACL-3. Thus, the virtual reorientation algorithm pre-   Second, while the false positive rates seem high when we examine the trace, we find that each of these false positive events actually correspond to a deceleration event, albeit of lesser magnitude than our earlier definition of a brake. Based on the GPS-derived ground truth, the average (minimum) speed decrease over four seconds at these events was 12 kmph (9 kmph), just short of our target of 14.4 kmph threshold. Note that a difference of 5kmph over 4 seconds corresponds to a location change of 5.6 m, which is well-within the localization error of GPS. Even if the GPS estimates were accurate, the false positives would simply correspond to less sharp brakes and are thus not problematic. In the case of false negatives, the rate is lower overall at 4-11%. The few false negatives again correspond to borderline events, with an average (maximum) speed decrease of 15 kmph (18 kmph), which when compared to the threshold of 14.4 kmph is again well within the localization error of GPS.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.4.2">Stop-and-Go Traffic vs. Pedestrians</head><p>Given that Nericell piggybacks on mobile phones, we have to be able to differentiate between phones that are in vehicles stuck in-traffic from out-of-traffic phones that are in parked cars or are carried by pedestrians walking alongside the road. Otherwise, the estimation of traffic conditions might be unnecessarily pessimistic, as observed in <ref type="bibr" target="#b36">[39]</ref>.</p><p>We use accelerometer readings to differentiate pedestrian motion (and stationary phones) from vehicular motion in stop-and-go traffic. The top curve in Figure <ref type="figure" target="#fig_5">5</ref> shows aX (offset by +1g for clarity) in the case of a vehicle moving at 5-10 kmph in stop-and-go traffic, applying its brakes repeatedly. The braking episodes, which are annotated manually to establish the ground truth, cause surges in aX that can be clearly seen and are also picked out by our braking detection heuristic from Section 5.4.1, with no false positives or negatives. Note that despite the low speed, and hence the surges due to the braking episodes lasting for a shorter duration than those in the drive in Section 5.4.1, the same setting of N =4 seconds works well because the surge, when averaged over a window of this duration, still exceeds the detection threshold of T =0.11g.</p><p>The bottom curve in Figure <ref type="figure" target="#fig_5">5</ref> shows aX (offset by -1g for clarity) for a pedestrian. The accelerometer is placed in the subject's trouser pocket, which results in larger spikes in aX than if it were placed in a shirt pocket or in a belt clip. Despite the significant spikes in aX associated with pedestrian motion, there is no surge that persists, unlike with the braking associated with stop-and-go traffic. When we applied our brake detection heuristic to different pedestrian accelerometer traces (with the accelerometer placed in the trouser pocket, shirt pocket, bag etc.), no false positives (i.e., brakes) were detected.</p><p>This limited evaluation suggests that our brake detection heuristic has significant potential to be used to distinguish between vehicles in stop-and-go traffic and pedestrians.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.4.3">Bump Detection</head><p>We now consider the problem of detecting a pothole or bump on the road. A bump could arise due to a variety of reasons, both unintended (e.g., potholes), and intended (e.g., speed bumps to slow vehicles down). We do not attempt to distinguish between these causes here as we believe that an external database of the intended bumps could be used to post-process the bump events reported by Nericell to filter out the ones intended causes.</p><p>As discussed in <ref type="bibr" target="#b21">[24]</ref>, the problem of bump detection is challenging for a number of reasons. A major challenge is establishing the ground truth. This is typically done only via manual annotation, which is subjective and could be heavily influenced by how the vehicle approaches the bump and at what speed. We also base our ground truth on manual annotation, but we ensure that the ground truth is decided by consensus among two or three users. On some sections of the road, we also performed multiple drives to compare the ground truth across drives and arrive at a consensus. The second major challenge with bump detection is that the accelerometer signal is typically of very short duration, on the order of milliseconds. Since a bump results in a significant vertical jerk, we expect it to register in the measurement of aZ. Also, since the vehicle shifts both up and down, there would be both spikes and dips in aZ. However, the magnitude of the signal spike can have different characteristics at different speeds.</p><p>These can be seen in Figures <ref type="figure">6</ref> and<ref type="figure">7</ref>, which shows aZ for a car going over a speed bump at low and high speeds, respectively. Note that, at low speeds, there is a distinct dip significantly below 1g that is sustained over several samples. We hypothesize that this dip corresponds to the physical phenomenon of the car's wheel falling, from the time it goes over the edge of the pothole until when it meets the bottom of the pothole. When the wheel impacts the ground, a sharp force is transferred to the vehicle, which is registered as a spike in aZ. At low speeds, the upward spike is muted, as in Figure <ref type="figure">6</ref>, while at high speeds, the upward spike can be significant, as in Figure <ref type="figure">7</ref>. While the sustained dip also occurs during bumps in many of our high speed traces, we Figure <ref type="figure">7</ref>: aZ when traversing a bump at high speed also found that it also caused a lot more false positives at high speeds. We suspect that small undulations in the road could be the cause of such false-positive dips.</p><p>Motivated by the above observations, we utilize two bump detectors depending on the speed of the vehicle. At high speeds (≥25 kmph), we use the surge in aZ to detect bumps. This is identical to the z-peak heuristic proposed in <ref type="bibr" target="#b21">[24]</ref>, where a spike along aZ greater than a threshold is classified as a suspect bump. At low speeds, we propose a new bump detector called z-sus, which looks for a sustained dip in aZ, reaching below a threshold T and lasting at least 20 ms (about 7 samples at our sampling rate of 310 Hz). The exact duration for which the vehicle's wheel falls, before it hits the bottom of the pothole, depends upon the geometry of the pothole as well as that of the vehicle itself. Only one of the vehicle's wheels -the one that passes over the pothole -falls, while the remaining wheels are solidly grounded, so the rate of fall is slower and the duration longer than with free fall. At high speeds, even minor irregularities in the road cause the vehicle to bob up and down, resulting in sustained dips. This leads to a high rate of false positives when z-sus is applied at high speeds. We have empirically determined that at low speeds, looking for a sustained dip of at least 20 ms duration is a good indicator of bumps, and at high speeds, the z-peak algorithm performs well. Finally, to identify the vehicle speed for applying the appropriate bump detector, we can rely on GSM localization (Section 7) since we only need a coarse-grained estinate of speed, i.e., whether the vehicle is travelling at low speeds (&lt;25 kmph) or not.</p><p>The two bump detectors, z-peak from <ref type="bibr" target="#b21">[24]</ref> and our new z-sus, were tested over two drives, one along a short section of road approximately 5 km long with a total of 44 bumps or potholes (labeled "bumpy road"), and another approximately 30km long with a total of 101 bumps or potholes from a mixture of bumpy roads interspersed with stretches of smooth highways (labeled "mixed road"). In the case of z-sus, a threshold of T = 0.8g was chosen by training over the bumpy road trace and then the same threshold was used over the longer mixed road trace for validation. In the case of z-peak, one could use techniques presented in <ref type="bibr" target="#b21">[24]</ref> to dynamically tune the threshold for different speeds. However, here we illustrate the best-case scenario for z-peak by tuning the threshold parameter separately to its optimal values for low and high speeds, respectively.</p><p>During each run, we obtained measurements from two well-oriented accelerometers, ACL-1 and ACL-2, as well as a disoriented accelerometer, ACL-3, that was virtually re- Table <ref type="table">5</ref>: False positives/negatives (FP/FN) for bump detectors, z-peak and our new z-sus. The numbers in bold correspond to the hybrid approach of applying z-sus at low speeds and z-peak at high speeds.</p><p>oriented. Our goal is to evaluate the bump detectors, both across the different accelerometers and across the two drives.</p><p>The results are shown in Table <ref type="table">5</ref>. Note that, even though we show results for z-sus at both low and high speeds for completeness, we wish to reiterate that z-sus is targeted as a detector only for low speeds.</p><p>We make several observations. First, while we have tuned both the detectors so that the false positive rate is kept low (&lt;10%), the false negative rate for both the detectors is still quite high (20-30%). This can be explained partly by the difficulty of establishing the ground truth, as noted above. Second, the false positive/negative rates show some variation across all three accelerometers (two well-oriented and one virtually reoriented) for both z-peak and z-sus, but the range of variation is limited for most of the cases. For example, false negative (positive) rates varies between 20-30% (5-15%) for the bumpy road trace. This shows that the virtual reorientation preserves the essential characteristics of the accelerometer signal. Third, consider the case when speed is less than 25 kmph, where the optimal threshold for z-peak is 1.45g. Here z-sus outperforms z-peak, with lower false positive rates for attaining similar or better false negative rates. Finally, we note that if z-peak is tuned with a threshold of 1.75g, it performs best at high speeds, achieving 3-8% false positive rates on the mixed road trace (z-sus suffers from unacceptably high false positive rates at high speeds).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="6.">AUDIO</head><p>All phones have a microphone that can serve as a readilyavailable sensor. In this section, we discuss how the audio sensed through the mobile's microphone can be used for honk detection. Audio sensing does use significant amount of power, although lower than WiFi or GPS on our iPAQ platform (Table <ref type="table">2</ref>), and is performed only on an as needed basis (see <ref type="bibr">Section 8)</ref>. Finally, note that the audio content never leaves the phone; only processed information such as the number of honks detected is sent to the Nericell server, alleviating privacy concerns to a large extent.</p><p>Nericell uses honk detection to identify noisy and chaotic traffic conditions like that at an unregulated intersection. There is considerable work in the field of audio content classification <ref type="bibr" target="#b20">[23,</ref><ref type="bibr" target="#b25">28,</ref><ref type="bibr" target="#b28">31]</ref> where researchers have used various machine learning approaches to detect, among other things,     the sound of a horn. In this section, we investigate a simple, heuristic-based approach for honk-detection. An approach that simply looks for spikes in sound power levels in the time domain performs quite poorly as it misses a lot of horn sounds that are muted inside an enclosed vehicle and also mistakes any loud noise as a horn. To motivate a more discriminating detector, Figure <ref type="figure" target="#fig_8">8</ref> depicts the spectrogram of a horn sound from 1.5s to 3s, i.e., a frequency versus time plot, with higher sound power depicted by darker shades of grey. The frequency harmonics are clearly visible (with a fundamental frequency under 500Hz) and there is considerable amount of energy around the 3kHz band, the region of highest human ear sensitivity <ref type="bibr" target="#b20">[23]</ref>.</p><p>Thus, we implement a simple detector that performs a discrete Fourier transform on 100ms audio samples and looks for energy spikes in the frequency domain. We define a spike as an instantaneous sample that is at least times the mean, where T ranges between 5 and 10. While one could design a detector that looks for the frequency harmonics in the spikes, we found that, in many horn audio samples, spikes corresponding to several frequencies in the harmonics were either muted or even absent. Based on empirical observations, we arrive at the following minimal heuristic for the detector: as long as there are at least two spikes, including at least one spike in the 2.5 kHz to 4 kHz region corresponding to the region of highest human ear sensitivity, we classify the audio sample as corresponding to a honk. Figure <ref type="figure" target="#fig_9">9</ref> plots the sound amplitude versus frequency based on a discrete Fourier transform performed on a window of 1024 audio samples (with an audio sampling rate of 11025 Hz) at time 1.6s of the horn sample depicted in Figure <ref type="figure" target="#fig_8">8</ref>. Note that the spikes match well with the darker shades in the spectrogram and would indicate a honk per the heuristic noted above.</p><p>To evaluate the performance of our honk detector, we use audio traces collected using four phones simultaneously at a chaotic and noisy traffic intersection. We use two HP iPAQs and two i-Mate KJAMs. One phone of each type was placed inside an enclosed vehicle and one of each type placed outside the vehicle. The latter emulates the phone being carried on an exposed vehicle such as a motorbike, which is common in developing regions. We establish the ground truth by listening to the audio clip from the phone placed outside the vehicle and manually identifying the honk times, with a granularity of 1 second. We then use the honk detector with different spike thresholds, T , to automatically identify honks and compare it with the ground truth. The audio trace was about 100 seconds in duration and had 26 honks from a variety of vehicles. <ref type="foot" target="#foot_3">4</ref>The results are shown in Table <ref type="table" target="#tab_8">6</ref>. Assuming a null hypothesis of no honk, the detector suffers false negatives, i.e. missed honk detection, mostly when the spikes in the 2.5-4kHz band are insignificant, while it suffers false positives mostly when the spike threshold is low enough for other sounds to be mis-identified as honks.</p><p>We make three observations based on these results. First, with a spike threshold that is large enough to avoid false positives, the honk detector performs better (i.e., has fewer false negatives) in the exposed vehicle scenario due to the higher sound power level. Second, the varying sensitivity of microphone in different phones can result in different number of honks being detected even on the same trace. These two observations indicate that when comparing honk data at different locations, care must be taken to separate out the data based on phone-type and ambient noise level before comparison. Third, a high spike threshold can substantially guard against false positives (0% for T ≥ 7 in this trace), though, it cannot eliminate it completely. In one of our audio traces, there was an instance of a spurious detection of a honk arising from the sound of a bird's chirping, which displayed horn-like characteristics. In general, this detector will have false positives whenever the audio content has honk-like spectrogram characteristics (e.g., alarms). If these false-positives become significant in some settings, a more sophisticated honk detector would be necessary. In future work, we plan to investigate machine learning based approaches for honk detection.</p><p>Finally, the honk detector is very efficient. Our implementation running on the iPAQ phone consumes only about 58ms of CPU time to detect honks in 1 second worth of 16bit, 11025 Hz audio samples (i.e., a CPU utilization of 5.8%). Note that the CPU utilization would be further reduced in practice because honk detection would be triggered on-demand rather than run continuously, as discussed in Section 8.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="7.">LOCALIZATION</head><p>Localization is a key component of Nericell, as it is in any sensing application. Each phone participating in Nericell would need to continuously localize its current position, so that sensed information such as honking or braking can be tagged with the relevant location. Thus, an energy-efficient localization service is a key requirement in Nericell.</p><p>As discussed in Section 2, there are a variety of approaches for outdoor localization including using Global Positioning System (GPS), WiFi <ref type="bibr" target="#b18">[21]</ref>, and GSM <ref type="bibr" target="#b33">[36,</ref><ref type="bibr" target="#b17">20]</ref>. However, given the high energy consumption characteristics of the WiFi and GPS radios (see Table <ref type="table">2</ref>), these are not suitable for continuous localization in Nericell<ref type="foot" target="#foot_4">5</ref> . Thus, we primarily rely on using GSM radios for energy-efficient coarse-grain localization and, as discussed in Section 8, we trigger the use of fine-grain localization using GPS when necessary.</p><p>There has been some recent work on using GSM to perform localization in indoor <ref type="bibr" target="#b33">[36]</ref> and outdoor environments <ref type="bibr" target="#b17">[20]</ref>. In <ref type="bibr" target="#b17">[20]</ref>, authors show that GSM signal strength-based localization algorithms can be quite accurate, with median errors of 94m and 196m in downtown and residential areas, respectively, in and around Seattle. When we tried to apply these techniques to the GSM tower signal data we collected in Bangalore, we found that the characteristics of the data was significantly different that these prior techniques were not applicable, as we elaborate on below. For example, we gathered one-hour long traces of the cell towers seen by four phones subscribed to four different providers, with two phones each placed at static locations in Seattle and Bangalore, respectively. In the Seattle traces, we found 28 and 17 unique tower IDs in total while, in the Bangalore traces, we found 93 and 62 unique tower IDs. Furthermore, in each of the Seattle traces, there was a stable set of 4 strongest tower IDs that were visible during the entire trace, while the stable set in the case of the Bangalore traces comprised just the 2 strongest tower IDs. <ref type="foot" target="#foot_5">6</ref> We believe that the significantly higher number of unique tower IDs seen in the Bangalore traces, and the consequent reduction in the stability of the set of towers seen, is due to the high density of the GSM deployment in India. For example, the inter-tower spacing in India is estimated to be 100 meters compared to the typical international micro-cell inter-tower spacing of about 400 meters <ref type="bibr" target="#b35">[38]</ref>.</p><p>The high density of towers seen in the Bangalore trace creates significant difficulties for prior RSSI-based localization algorithms. For example, the RADAR-based fingerprint algorithm, which outperformed other algorithms considered in <ref type="bibr" target="#b17">[20]</ref> when applied to the traces from Seattle, requires that the tower signature (a set of, upto 7, tower IDs) seen by the phone at a given time exactly match the tower signature stored in the database. The matched database entries that are the closest in signal strength space are then used for localization. In the above Bangalore trace, given 93 available towers and a phone exposing only the strongest 7 tower IDs at any given time, the probability of an exact match of a current signature with that in the database is quite small (a 4% probability of match, based on training data from 23 drives over 12 days in Bangalore), making these algorithms ineffective.</p><p>On the other hand, the high density of visible tower IDs suggests that even simple localization algorithms, such as the strongest signal approach used, for example, in dense indoor WiFi settings <ref type="bibr" target="#b15">[18]</ref>, may be effective. Thus, in this paper, we focus on evaluating the effectiveness of a strongest signal (SS)-based localization algorithm. This algorithm relies on a training database that maps the tower ID with the strongest-signal to an average latitude/longitude posi-  Based on our traces, we find that the probability of finding a match with SS is 96% compared to 4% for the exact match approach, as indicated above.</p><p>We compute the localization distance estimate error of the SS algorithm using a rich collection of cellular traces from Bangalore. We use 23 drives over 12 days in Bangalore as training data for building the tower ID database and use 10 drives over 5 days for validation (see Table <ref type="table" target="#tab_0">1</ref>). The training data covers a significant portion of roads in the heart of Bangalore city (see Figure <ref type="figure" target="#fig_0">1</ref>) while the validation drives comprise a subset of these roads. We use GPS-based localization data, collected during the same drives, as the ground truth for computing the error in our location estimates.</p><p>The median localization error for SS in these validation drives is only 117m while 90th percentile error is 660m. For comparison, the median localization error for SS using our limited Seattle area traces (training data of 4 drives, validation on 1 drive) was higher at 179m but, as shown in <ref type="bibr" target="#b17">[20]</ref>, sophisticated RSSI-based localization algorithms may be applied in this setting to reduce the median error to under 100m.</p><p>Traffic speed monitoring is a direct application of localization. Using the SS algorithm, the median and 90 th percentile error in the speed estimates over 100 second travel segments in the Bangalore validation traces were 3.4 kmph and 11.2 kmph, respectively. The median and 90 th percentile relative error in the speed estimates were 21% and 70% respectively. Note that the relative error is high because of the slow speed of traffic in Bangalore. The accuracy in absolute terms (the 3.4 kmph and 11.2 kmph figures noted above) is arguably more important for it would determine our ability to distinguish between traffic that is crawling on a congested road and moving freely on a fast road. The results for the Bangalore validation traces are summarized in Table <ref type="table" target="#tab_10">7</ref>.</p><p>In conclusion, with a high density of cell towers, as is the case in many of the rapidly growing cities of the developing world, we believe a simple strongest signal-based algorithm can provide reasonably accurate and energy-efficient localization and speed estimates. Note that, if the training database is sparse or out-of-date, the SS-based localization may not find a match in the database for a location estimation. In order to increase robustness, we have also designed and evaluated a Convex Hull Intersection (CHI)-based localization scheme that matches on subsets of towers seen currently rather than matching exactly as used in the SS scheme. For details, please refer to <ref type="bibr" target="#b32">[35]</ref>.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="8.">TRIGGERED SENSING</head><p>Besides making efficient use of individual sensors, there is the opportunity for energy savings by employing sensors in tandem. A low-energy but possibly less accurate sensor could be used to trigger the operation of a high-energy and possibly more accurate or complementary sensor only when needed. Of the sensors in our current prototype, we deem the GSM radio and the accelerometer as low-energy sensors, and GPS and the microphone as high-energy sensors (see Table <ref type="table">2</ref>).</p><p>The GSM radio is always kept on. The GSM radio is then used in conjunction with the accelerometer to trigger GPS and/or the microphone when needed. Specific instances of triggered sensing in Nericell include the following:</p><p>Localization: GSM-based localization is used to trigger GPS to obtain an accurate location fix on a feature of interest. Consider a phone that detects a major pothole in the road using its accelerometer measurements (Section 5.4.3). Since it uses GSM-based localization by default, the phone has an approximate idea of the location of this pothole. The next time the phone (or another participating phone, assuming information is shared across phones) finds itself in the same vicinity based on GSM information, it triggers GPS so that an accurate location fix is obtained on the pothole. The energy savings can be very significant, depending on the specific setting. For example, if the GPS is triggered when the GSM location estimate is within 500 m of the desired latitude/longitude and turned off when the desired location has been passed, then on a 20 km long drive, GPS would need to be turned on only 3.2% of the time (averaged over 10 runs).</p><p>Virtual reorientation: The accelerometer (Section 5.2.2) and also user activity detection (Section 5.3) is used to determine that a phone's orientation may have changed and hence the virtual reorientation procedure needs to be repeated. GPS is then triggered at such a time to help detect the braking episodes needed for reorientation (Section 5.2.3). We could optimize this further by using GSM localization or the accelerometer to determine that the phone is likely in a moving vehicle (based on changes in the GSM/accelerometer measurements) before triggering GPS.</p><p>Honk detection: Braking detection (Section 5.4.1) could be used to trigger honk detection. If significant levels of braking as well as honking are detected, it might point to traffic chaos.</p><p>We defer an evaluation of these triggered sensing techniques to future work.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="9.">IMPLEMENTATION</head><p>We have implemented all of the algorithms described in the paper, most of these on the HP iPAQ smartphone running Windows Mobile 5. The virtual reorientation algorithm runs on the HP iPAQ by gathering measurements from the Sparkfun WiTilt accelerometer via a serial port interface over its Bluetooth radio. The algorithm is implemented in Python and C#. The audio honk detection algorithm also runs on the HP iPAQ. This is implemented in C# and invokes an FFT library for the discrete fourier transform and the Windows Mobile 5 coredll library for capturing the microphone input.</p><p>The GSM localization algorithm is the only one that does not currently run on the iPAQ, since the iPAQ does not expose the necessary cell tower information. The cell tower information used in our traces is obtained on the rebranded HTC Typhoon phones based on reading a fixed memory location, that has been obtained via reverse-engineering and is well-known <ref type="bibr" target="#b17">[20]</ref>. The localization algorithms are currently implemented in Perl and can easily be ported to the iPAQ, if and when the necessary cell tower information becomes accessible. At this time, we have implemented a simple C# program to obtain GPS information from the GPS receiver on the iPAQ and use this for our localization needs. Finally, we have also implemented detectors for identifying user interactions, thereby pausing accelerometer and microphone-based sensing when the sensor data is invalid. This implementation is on Windows Mobile 5, which provides the necessary hooks to intercept keypad and mouse events, and also access to call log information for both incoming and outgoing calls.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="9.1">Energy Costs</head><p>We performed micro-benchmarks (see Table <ref type="table" target="#tab_11">8</ref>) in order to estimate energy usage of the sensing components of Nericell under typical usage. We base our calculation on an estimated drive time of four hours per day and assume that GSM-based localization triggers can help identify the driving events. We assume that brake and bump detection are active throughout the four hours while audio and GPS are triggered only due to specific events such as during braking or re-orientation respectively. Based on these assumptions, Nericell would reduce the battery lifetime of the HP iPAQ by 9.7% to approximately 22 hours, resulting in very limited impact to the user of the smartphone.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="10.">CONCLUSION</head><p>Nericell is a system for rich monitoring of road and traffic conditions using mobile smartphones equipped with an array of sensors (GPS, accelerometer, microphone) and communication radios. In this paper, we have focused on the sensing component of Nericell, specifically on how these sensors and radios are used to detect bumps and potholes, braking, and honking, and to localize the phone in an energy-efficient manner. We have presented techniques to virtually reorient a disoriented accelerometer and to use multiple sensors in tandem, with one triggering the other, to save energy. Our evaluation on extensive drive data gathered in Bangalore has yielded promising results. We have a prototype of Nericell, minus GSM-based localization, running on Windows Mobile 5.0 Pocket PCs.</p><p>In future work, we plan to do a deployment of Nericell on a modest scale, perform experiments on multiple types of vehicles, and investigate the application of machine learning to robust honk detection.</p></div><figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_0"><head>Figure 1 :</head><label>1</label><figDesc>Figure 1: Map of Bangalore with drive routes highlighted</figDesc><graphic coords="4,56.56,122.10,107.36,134.77" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_1"><head>Figure 2 :</head><label>2</label><figDesc>Figure 2:A typical chaotic road intersection with variety of vehicles at loggerheads</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_2"><head>Figure 3 :</head><label>3</label><figDesc>Figure 3: This figure illustrates the process of virtually reorienting a disoriented accelerometer. (a) shows the measurements made at a disoriented accelerometer, which unsurprisingly do not match with the measurements shown in (b), corresponding to a well-oriented accelerometer. However, after the disoriented accelerometer has been virtually reoriented, its corrected measurements shown in (c) match those in (b) quite well.</figDesc><graphic coords="6,54.08,39.96,250.70,250.60" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_3"><head>Z</head><label></label><figDesc>are estimated (Figure 4(d)). Figure 4(d) only shows a surge in a ′ X , which is consistent with Figure 4(b).</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_4"><head>Figure 4 :</head><label>4</label><figDesc>Figure 4: Estimating the orientation of a disoriented accelerometer based on sharp deceleration starting at around 27 seconds: φpre = -88 o , θ tilt = 49 o , ψpost = -135 o</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_5"><head>TimeFigure 5 :</head><label>5</label><figDesc>Figure5: X-axis accel. for a car in traffic and a pedestrian serves the characteristics accelerometer measurements sufficiently to allow the braking detector to work effectively. Second, while the false positive rates seem high when we examine the trace, we find that each of these false positive events actually correspond to a deceleration event, albeit of lesser magnitude than our earlier definition of a brake. Based on the GPS-derived ground truth, the average (minimum) speed decrease over four seconds at these events was 12 kmph (9 kmph), just short of our target of 14.4 kmph threshold. Note that a difference of 5kmph over 4 seconds corresponds to a location change of 5.6 m, which is well-within the localization error of GPS. Even if the GPS estimates were accurate, the false positives would simply correspond to less sharp brakes and are thus not problematic. In the case of false negatives, the rate is lower overall at 4-11%. The few false negatives again correspond to borderline events, with an average (maximum) speed decrease of 15 kmph (18 kmph), which when compared to the threshold of 14.4 kmph is again well within the localization error of GPS.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_6"><head></head><label></label><figDesc>Figure 6: aZ when traversing a bump at low speed</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_8"><head>Figure 8</head><label>8</label><figDesc>Figure 8: Spectrogram of the horn of a Toyota Innova minivan</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_9"><head>Figure 9 :</head><label>9</label><figDesc>Figure 9: DFT of horn at 1.6s</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_0"><head>Table 1 :</head><label>1</label><figDesc>Summary of data gathered on drives</figDesc><table><row><cell>Location</cell><cell>Dates</cell><cell>Duration</cell><cell>Dist.</cell><cell>Information</cell></row><row><cell></cell><cell></cell><cell>(hours)</cell><cell>(km)</cell><cell>recorded</cell></row><row><cell>Bangalore</cell><cell>03-Sep-07 -19-Sep-07</cell><cell>19.5</cell><cell>377</cell><cell>GPS, GSM</cell></row><row><cell></cell><cell>20-Nov-07 -22-Nov-07</cell><cell></cell><cell></cell><cell></cell></row><row><cell>Seattle</cell><cell>25-Sep-07 -28-Sep-07</cell><cell>4.1</cell><cell>183</cell><cell>GPS, GSM</cell></row><row><cell>Bangalore</cell><cell>30-Mar-08</cell><cell>4.0</cell><cell>62</cell><cell>GPS, accel.</cell></row><row><cell></cell><cell>08-Apr-08 -13-Apr-08</cell><cell></cell><cell></cell><cell></cell></row><row><cell></cell><cell>8.54km 8.54km</cell><cell></cell><cell></cell><cell></cell></row><row><cell></cell><cell>8.88km</cell><cell></cell><cell></cell><cell></cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_4"><head>Table 4 :</head><label>4</label><figDesc>False Positives/Negatives of Brake detector</figDesc><table /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_5"><head>Comparison of Car and Pedestrian movement</head><label></label><figDesc></figDesc><table /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_8"><head>Table 6 :</head><label>6</label><figDesc>False Positives/Negatives (FP/FN) of Honk detector</figDesc><table /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_10"><head>Table 7 :</head><label>7</label><figDesc>Localization and Speed estimate errors for SS tion obtained via GPS. During localization, the phone simply looks up its current strongest tower ID in the training database and returns the corresponding latitude/longitude position as its estimate.</figDesc><table /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_11"><head>Table 8 :</head><label>8</label><figDesc>Energy requirement of Nericell during a drive</figDesc><table><row><cell></cell><cell>Power (mW)</cell><cell>% Time active</cell></row><row><cell>Audio</cell><cell>223.2</cell><cell>5</cell></row><row><cell>Honk Detection</cell><cell>63.3</cell><cell>5</cell></row><row><cell>GPS</cell><cell>617.3</cell><cell>10</cell></row><row><cell>Reorientation of accel values</cell><cell>20.9</cell><cell>100</cell></row><row><cell>Bump &amp; Brake Detection</cell><cell>9.3</cell><cell>100</cell></row><row><cell>Accelerometer</cell><cell>1.65</cell><cell>100</cell></row></table></figure>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" n="1" xml:id="foot_0"><p>Nericell is a play on the word 'Nerisal', which means 'congestion' in Tamil.</p></note>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" n="2" xml:id="foot_1"><p>The only reason that the accelerometer measurements were made separately from the cellular measurements was that we procured the accelerometers later.</p></note>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" n="3" xml:id="foot_2"><p>Although it was not an issue in our setting, if sharp turns at high speeds are likely, we would have to fall back on GPS to identify suitable periods for this estimation.</p></note>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" n="4" xml:id="foot_3"><p>The need to manually establish the ground truth by listening limits the length of the trace that is feasible to evaluate.</p></note>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" n="5" xml:id="foot_4"><p>Similar costs have been reported for GPS on Nokia N95 phones in<ref type="bibr" target="#b22">[25]</ref> </p></note>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" n="6" xml:id="foot_5"><p>Note that a single physical tower could be associated with several tower IDs corresponding to different sectors and frequency channels.</p></note>
		</body>
		<back>

			<div type="acknowledgement">
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Acknowledgements</head><p>Several people wrote useful pieces of code that we have borrowed in our prototype of TrafficSense: Ramya Bharathi Nimmagadda (detecting user interaction with a phone), Nilesh Mishra (extracting GSM tower information), and Pei Zhang (a rudimentary TrafficSense server). The drivers of Japan Travels as well as Kannan and Srinivas endured several hours of driving experiments with patience. Ranjita Bhagwan, Geoff Voelker, our shepherd Sam Madden and the anonymous reviewers of Sensys 2008 provided insightful comments that have helped improve this paper. We thank them all.</p></div>
			</div>

			<div type="annex">
<div xmlns="http://www.tei-c.org/ns/1.0"><p>Appendix A: Estimating the Angle of Pre-rotation Since the only acceleration experienced when stationary or in steady motion is along Z, aX = 0 and aY = 0. For a well-oriented accelerometer, we would also have ax = 0 and ay = 0. However, for a disoriented accelerometer, the prerotation followed by the tilt implies that x and y would, in general, no longer be orthogonal to Z, so ax and ay would be equal to the projections of the 1g acceleration along Z onto x and y, respectively. To calculate this, we first consider the pre-rotation and decompose each of ax and ay into their components along X and Y , respectively. Then when the tilt (about Y ) is applied, only the components of ax and ay along X would be affected by gravity.</p><p>Thus after the pre-rotation and the tilt, we have: ax = cos(φpre)sin(θ tilt ) and ay = sin(φpre)sin(θ tilt ). So, tan(φpre) = ay ax which yields Equation 2 for estimating φpre.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Appendix B: Estimating the Angle of Post-rotation</head><p>We can compute a ′ X by running through the steps of prerotation, tilt, and post-rotation in sequence, at each step applying the decomposition method used in Appendix A. Starting with just pre-rotation, we have a ′ pre X = axcos(φpre)+ aysin(φpre) and a ′ pre Y = -axsin(φpre) + aycos(φpre). After tilt is also applied, we have a</p><p>remains unchanged because the tilt is itself about Y ). Finally, after post-rotation is also applied, we have a</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>cos(ψpost)+a</head><p>′ pre-tilt Y sin(ψpost). Expanding this we have, a ′ X = [(axcos(φpre) + aysin(φpre))cos(θ tilt )azsin(θ tilt )]cos(ψpost)+[-axsin(φpre)+aycos(φpre)]sin(ψpost).</p><p>To maximize a ′ X consistent with a period of sharp deceleration, we set its derivative with respect to ψpost, </p></div>			</div>
			<div type="references">

				<listBibl>

<biblStruct xml:id="b0">
	<monogr>
		<ptr target="http://www.btis.in/" />
		<title level="m">Bangalore Transport Information System</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b1">
	<monogr>
		<ptr target="http://www.calccit.org/itsdecision/servandtech/TrafficSurveillance/surveillanceoverview.html" />
		<title level="m">California Center for Innovative Transportation: Traffic Surveillance</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b2">
	<monogr>
		<ptr target="http://www.sparkfun.com/datasheets/Accelerometers/MMA7260Q-Rev1.pdf" />
		<title level="m">Freescale MMA7260Q Accelerometer</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b3">
	<monogr>
		<ptr target="http://investing.reuters.co.uk/news/articleinvesting.aspx?type=media&amp;storyID=nL29172095" />
		<title level="m">Global cellphone penetration reaches 50 pct</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b4">
	<monogr>
		<idno>1090709-1113753-1113753-1113753-1117925- 12573438.html</idno>
		<ptr target="http://h10010.www1.hp.com/wwpc/au/en/ho/WF06a/" />
		<title level="m">HP iPAQ hw6965 Mobile Messenger Specifications</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b5">
	<monogr>
		<ptr target="http://timesofindia.indiatimes.com/Business/IndiaBusiness/" />
		<title level="m">India adds 83 mn mobile users in a year</title>
		<imprint/>
	</monogr>
	<note>India adds 83 mn mobile users in a year/ articleshow/2786690.cms</note>
</biblStruct>

<biblStruct xml:id="b6">
	<monogr>
		<ptr target="http://www.inrix.com/technology.asp" />
		<title level="m">INRIX Dynamic Predictive Traffic</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b7">
	<monogr>
		<ptr target="http://www.its.dot.gov/" />
		<title level="m">Intelligent Transportation Systems</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b8">
	<monogr>
		<ptr target="http://economictimes.indiatimes.com/articleshow/2341785.cms" />
		<title level="m">Mobile boom helps India reach Internet goal before time</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b9">
	<monogr>
		<ptr target="http://research.microsoft.com/research/mns/projects/Nericell/" />
		<title level="m">Nericell project webpage</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b10">
	<monogr>
		<ptr target="http://www.onstar.com/" />
		<title level="m">OnStar by GM</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b11">
	<monogr>
		<ptr target="http://www.its.washington.edu/projects/busviewoverview.html" />
		<title level="m">SmartTrek: Busview</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b12">
	<monogr>
		<ptr target="http://www.sparkfun.com/commerce/productinfo" />
		<title level="m">SparkFun Wireless Accelerometer/Tilt Controller version 2.5</title>
		<imprint/>
	</monogr>
	<note>php? products id= 254</note>
</biblStruct>

<biblStruct xml:id="b13">
	<analytic>
		<title/>
		<author>
			<persName><forename type="first">D</forename><surname>Burke</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Participatory Sensing. In World Sensor Web Workshop</title>
		<imprint>
			<date type="published" when="2006">2006</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b14">
	<monogr>
		<title level="m" type="main">Security and Cooperation in Wireless Networks</title>
		<author>
			<persName><forename type="first">L</forename><surname>Buttyan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J.-P</forename><surname>Hubaux</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2007">2007</date>
			<publisher>Cambridge University Press</publisher>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b15">
	<analytic>
		<title level="a" type="main">A Location-based Management System for Enterprise Wireless LANs</title>
		<author>
			<persName><forename type="first">R</forename><surname>Chandra</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Padhye</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Wolman</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Zill</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">NSDI</title>
		<imprint>
			<date type="published" when="2007">2007</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b16">
	<analytic>
		<title level="a" type="main">Vision Modules for a Multi-Sensory Bridge Monitoring Approach</title>
		<author>
			<persName><forename type="first">R</forename><surname>Chang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">T</forename><surname>Gandhi</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><forename type="middle">M</forename><surname>Trivedi</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">IEEE Intelligent Transportation Systems Conference</title>
		<imprint>
			<date type="published" when="2004">2004</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b17">
	<analytic>
		<title level="a" type="main">Practical Metropolitan-Scale Positioning for GSM Phones</title>
		<author>
			<persName><forename type="first">M</forename><surname>Chen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">T</forename><surname>Sohn</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Chmelev</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Haehnel</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Hightower</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Hughes</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Lamarca</surname></persName>
		</author>
		<author>
			<persName><forename type="first">F</forename><surname>Potter</surname></persName>
		</author>
		<author>
			<persName><forename type="first">I</forename><surname>Smith</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Varshavsky</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Ubicomp</title>
		<imprint>
			<date type="published" when="2006">2006</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b18">
	<analytic>
		<title level="a" type="main">Accuracy Characterization for Metropolitan-scale Wi-Fi Localization</title>
		<author>
			<persName><forename type="first">Y</forename><surname>Cheng</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Y</forename><surname>Chawathe</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Lamarca</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Krumm</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">MobiSys</title>
		<imprint>
			<date type="published" when="2005">2005</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b19">
	<monogr>
		<author>
			<persName><forename type="first">D</forename><forename type="middle">J</forename><surname>Dailey</surname></persName>
		</author>
		<idno>No. WA-RD 505.1</idno>
		<ptr target="http://www.wsdot.wa.gov/Research/Reports/500/505.1.htm" />
		<title level="m">SmartTrek: A Model Deployment Initiative</title>
		<imprint>
			<date type="published" when="2001-05">May 2001</date>
		</imprint>
		<respStmt>
			<orgName>Washington State Transportation Center (TRAC), University of Washington</orgName>
		</respStmt>
	</monogr>
	<note type="report_type">Report</note>
</biblStruct>

<biblStruct xml:id="b20">
	<analytic>
		<title level="a" type="main">Detecting alarm sounds</title>
		<author>
			<persName><forename type="first">D</forename><surname>Ellis</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">CRAC workshop</title>
		<meeting><address><addrLine>Aalborg, Denmark</addrLine></address></meeting>
		<imprint>
			<date type="published" when="2001">2001</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b21">
	<analytic>
		<title level="a" type="main">The Pothole Patrol: Using a Mobile Sensor Network for Road Surface Monitoring</title>
		<author>
			<persName><forename type="first">J</forename><surname>Eriksson</surname></persName>
		</author>
		<author>
			<persName><forename type="first">L</forename><surname>Girod</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Hull</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Newton</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Madden</surname></persName>
		</author>
		<author>
			<persName><forename type="first">H</forename><surname>Balakrishnan</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">MobiSys</title>
		<imprint>
			<date type="published" when="2008">2008</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b22">
	<analytic>
		<title level="a" type="main">Micro-Blog: Sharing and Querying Content through Mobile Phones and Social Participation</title>
		<author>
			<persName><forename type="first">S</forename><surname>Gaonkar</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Li</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><forename type="middle">R</forename><surname>Choudhury</surname></persName>
		</author>
		<author>
			<persName><forename type="first">L</forename><surname>Cox</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Schmidt</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">MobiSys</title>
		<imprint>
			<date type="published" when="2008">2008</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b23">
	<monogr>
		<title level="m" type="main">Classical Mechanics, 2nd Edition</title>
		<author>
			<persName><forename type="first">H</forename><surname>Goldstein</surname></persName>
		</author>
		<imprint>
			<date type="published" when="1980">1980</date>
			<publisher>Addison-Wesley</publisher>
			<biblScope unit="page" from="143" to="148" />
		</imprint>
	</monogr>
	<note>The Euler Angles</note>
</biblStruct>

<biblStruct xml:id="b24">
	<analytic>
		<title level="a" type="main">Virtual trip lines for distributed privacy-preserving traffic monitoring</title>
		<author>
			<persName><forename type="first">B</forename><surname>Hoh</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Gruteser</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Herring</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Ban</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Work</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J.-C</forename><surname>Herrera</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><forename type="middle">M</forename><surname>Bayen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Annavaram</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Q</forename><surname>Jacobson</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">MobiSys</title>
		<imprint>
			<date type="published" when="2008">2008</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b25">
	<analytic>
		<title level="a" type="main">SOLAR: Sound Object Localization and Retreival in Complex Audio Environments</title>
		<author>
			<persName><forename type="first">D</forename><surname>Hoiem</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Y</forename><surname>Ke</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Sukthankar</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">IEEE International Conference on Acoustics, Speech, and Signal Processing</title>
		<imprint>
			<date type="published" when="2005">2005</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b26">
	<analytic>
		<title level="a" type="main">The CarTel Mobile Sensor Computing System</title>
		<author>
			<persName><forename type="first">B</forename><surname>Hull</surname></persName>
		</author>
		<author>
			<persName><forename type="first">V</forename><surname>Bychkovsky</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><surname>Chen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Goraczko</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Miu</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><surname>Shih</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Y</forename><surname>Zhang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">H</forename><surname>Balakrishnan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Madden</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">SenSys</title>
		<imprint>
			<date type="published" when="2006">2006</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b27">
	<analytic>
		<title/>
		<author>
			<persName><forename type="first">W</forename><forename type="middle">D</forename><surname>Jones</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Forecasting Traffic Flow. IEEE Spectrum</title>
		<imprint>
			<date type="published" when="2001-01">Jan 2001</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b28">
	<monogr>
		<author>
			<persName><forename type="first">H</forename><surname>Kim</surname></persName>
		</author>
		<author>
			<persName><forename type="first">N</forename><surname>Moreau</surname></persName>
		</author>
		<author>
			<persName><forename type="first">T</forename><surname>Sikora</surname></persName>
		</author>
		<title level="m">Audio Classification Based on MPEG-7 Spectral Basis Representations. IEEE Transactions on Circuits and Systems for Video Technology</title>
		<imprint>
			<date type="published" when="2004-05">May 2004</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b29">
	<analytic>
		<title level="a" type="main">Toward Community Sensing</title>
		<author>
			<persName><forename type="first">A</forename><surname>Krause</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><surname>Horvitz</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Kansal</surname></persName>
		</author>
		<author>
			<persName><forename type="first">F</forename><surname>Zhao</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">ACM/IEEE International Conference on Information Processing in Sensor Networks (IPSN)</title>
		<imprint>
			<date type="published" when="2008">2008</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b30">
	<monogr>
		<title level="m" type="main">Predestination: Where Do You Want to Go Today? IEEE Computer Magazine</title>
		<author>
			<persName><forename type="first">J</forename><surname>Krumm</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><surname>Horvitz</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2007-04">Apr 2007</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b31">
	<analytic>
		<title level="a" type="main">AITVS: Advanced Interactive Traffic Visualization System</title>
		<author>
			<persName><forename type="first">C.-T</forename><surname>Lu</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><forename type="middle">P</forename><surname>Boedihardjo</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Zheng</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">ICDE</title>
		<imprint>
			<date type="published" when="2006">2006</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b32">
	<monogr>
		<title level="m" type="main">Trafficsense: Rich monitoring of road and traffic conditions using mobile smartphones</title>
		<author>
			<persName><forename type="first">P</forename><surname>Mohan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">V</forename><forename type="middle">N</forename><surname>Padmanabhan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Ramjee</surname></persName>
		</author>
		<idno>MSR-TR-2008-59</idno>
		<imprint>
			<date type="published" when="2008">2008</date>
			<publisher>Microsoft Research</publisher>
		</imprint>
	</monogr>
	<note type="report_type">Technical Report</note>
</biblStruct>

<biblStruct xml:id="b33">
	<analytic>
		<title level="a" type="main">Accurate GSM Indoor Localization</title>
		<author>
			<persName><forename type="first">V</forename><surname>Otsason</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Varshavsky</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Lamarca</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><surname>De Lara</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Ubicomp</title>
		<imprint>
			<date type="published" when="2005">2005</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b34">
	<analytic>
		<title level="a" type="main">Context for Wireless: Context-sensitive Energy-efficient Wireless Data Transfer</title>
		<author>
			<persName><forename type="first">A</forename><surname>Rahmati</surname></persName>
		</author>
		<author>
			<persName><forename type="first">L</forename><surname>Zhong</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">MobiSys</title>
		<imprint>
			<date type="published" when="2007">2007</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b35">
	<monogr>
		<title level="m" type="main">How should spectrum be allocated? The Economic Times</title>
		<author>
			<persName><forename type="first">T</forename><forename type="middle">V</forename><surname>Ramachandran</surname></persName>
		</author>
		<ptr target="http://economictimes.indiatimes.com/Debate/Howshouldspectrumbeallocated/articleshow/2520807.cms" />
		<imprint>
			<date type="published" when="2007-11">Nov 2007</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b36">
	<monogr>
		<author>
			<persName><forename type="first">B</forename><forename type="middle">L</forename><surname>Smith</surname></persName>
		</author>
		<author>
			<persName><forename type="first">H</forename><surname>Zhang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Fontaine</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Green</surname></persName>
		</author>
		<idno>No. STL-2003-01</idno>
		<ptr target="http://ntl.bts.gov/lib/23000/23400/23431/CellPhoneProbes-final.pdf" />
		<title level="m">Cellphone Probes as an ATMS Tool</title>
		<imprint>
			<date type="published" when="2003-06">Jun 2003</date>
		</imprint>
		<respStmt>
			<orgName>University of Virginia</orgName>
		</respStmt>
	</monogr>
	<note type="report_type">Smart Travel Lab Report</note>
</biblStruct>

<biblStruct xml:id="b37">
	<analytic>
		<title level="a" type="main">Are GSM Phones THE Solution for Localization</title>
		<author>
			<persName><forename type="first">A</forename><surname>Varshavsky</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">WMCSA</title>
		<imprint>
			<date type="published" when="2006">2006</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b38">
	<monogr>
		<author>
			<persName><forename type="first">E</forename><forename type="middle">W</forename><surname>Weisstein</surname></persName>
		</author>
		<ptr target="http://mathworld.wolfram.com/EulerAngles.html" />
		<title level="m">Euler Angles. MathWorld -A Wolfram Web Resource</title>
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b39">
	<analytic>
		<title level="a" type="main">Surface Street Traffic Estimation</title>
		<author>
			<persName><forename type="first">J</forename><surname>Yoon</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Noble</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Liu</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">MobiSys</title>
		<imprint>
			<date type="published" when="2007">2007</date>
		</imprint>
	</monogr>
</biblStruct>

				</listBibl>
			</div>
		</back>
	</text>
</TEI>
